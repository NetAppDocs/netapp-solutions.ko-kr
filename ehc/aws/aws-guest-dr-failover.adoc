---
sidebar: sidebar 
permalink: ehc/aws/aws-guest-dr-failover.html 
keywords: Disaster, primary site, SnapCenter, database, restore process, 
summary: 운영 사내 데이터 센터에서 재해가 발생할 경우 당사의 시나리오에서는 AWS의 VMware Cloud를 사용하여 Amazon Web Services 인프라에 있는 2차 사이트로 페일오버합니다. 가상 시스템과 사내 ONTAP 클러스터에 더 이상 액세스할 수 없다고 가정합니다. 또한, SnapCenter 및 Veeam 가상 머신을 더 이상 액세스할 수 없으며 2차 사이트에서 다시 구축해야 합니다. 
---
= 페일오버
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./../../media/


link:aws-guest-dr-snapcenter-db-backup.html["이전: 재해 복구를 위한 SnapCenter 데이터베이스 백업"]



== 운영 사이트에서 재해가 발생합니다

운영 사내 데이터 센터에서 재해가 발생할 경우 당사의 시나리오에서는 AWS의 VMware Cloud를 사용하여 Amazon Web Services 인프라에 있는 2차 사이트로 페일오버합니다. 가상 시스템과 사내 ONTAP 클러스터에 더 이상 액세스할 수 없다고 가정합니다. 또한, SnapCenter 및 Veeam 가상 머신을 더 이상 액세스할 수 없으며 2차 사이트에서 다시 구축해야 합니다.

이 섹션에서는 클라우드 환경으로의 인프라 페일오버에 대해 다루며 다음 주제를 다룹니다.

* SnapCenter 데이터베이스 복원 새 SnapCenter 서버가 설정된 후, 보조 FSx 스토리지가 기본 스토리지 장치가 될 수 있도록 MySQL 데이터베이스 및 구성 파일을 복원하고 데이터베이스를 재해 복구 모드로 전환합니다.
* Veeam Backup & Replication을 사용하여 애플리케이션 가상 머신을 복구합니다. VM 백업이 포함된 S3 스토리지를 연결하고 백업을 가져온 다음 AWS의 VMware Cloud로 복원합니다.
* SnapCenter를 사용하여 SQL Server 응용 프로그램 데이터를 복원합니다.
* SnapCenter를 사용하여 Oracle 애플리케이션 데이터를 복구합니다.




== SnapCenter 데이터베이스 복원 프로세스

SnapCenter는 MySQL 데이터베이스 및 구성 파일의 백업 및 복원을 허용하여 재해 복구 시나리오를 지원합니다. 이를 통해 관리자는 사내 데이터 센터에서 SnapCenter 데이터베이스의 정기적인 백업을 유지하고 나중에 해당 데이터베이스를 보조 SnapCenter 데이터베이스로 복원할 수 있습니다.

원격 SnapCenter 서버에서 SnapCenter 백업 파일에 액세스하려면 다음 단계를 수행하십시오.

. FSx 클러스터에서 SnapMirror 관계를 중단하여 볼륨을 읽기/쓰기로 만듭니다.
. 필요한 경우 CIFS 서버를 생성하고 복제된 볼륨의 연결 경로를 가리키는 CIFS 공유를 생성합니다.
. xcopy를 사용하여 보조 SnapCenter 시스템의 로컬 디렉토리에 백업 파일을 복사합니다.
. SnapCenter v4.6을 설치합니다.
. SnapCenter 서버의 FQDN이 원래 서버와 동일한지 확인합니다. 이 작업은 DB 복원이 성공하려면 필요합니다.


복원 프로세스를 시작하려면 다음 단계를 수행하십시오.

. 보조 SnapCenter 서버의 Swagger API 웹 페이지로 이동하고 이전 지침에 따라 인증 토큰을 얻습니다.
. Swagger 페이지의 Disaster Recovery 섹션으로 이동하여 "/4.6/disasterrecovery/server/restore"를 선택하고 Try It Out을 클릭합니다.
+
image:dr-vmc-aws-image48.png["오류: 그래픽 이미지가 없습니다"]

. 인증 토큰을 붙여 넣고 SmDRResterRequest 섹션에서 백업 이름과 보조 SnapCenter 서버의 로컬 디렉터리를 붙여 넣습니다.
+
image:dr-vmc-aws-image49.png["오류: 그래픽 이미지가 없습니다"]

. 실행 버튼을 선택하여 복원 프로세스를 시작합니다.
. SnapCenter에서 모니터 섹션으로 이동하여 복구 작업의 진행률을 확인합니다.
+
image:dr-vmc-aws-image50.png["오류: 그래픽 이미지가 없습니다"]

+
image:dr-vmc-aws-image51.png["오류: 그래픽 이미지가 없습니다"]

. 보조 스토리지에서 SQL Server 복원을 사용하려면 SnapCenter 데이터베이스를 재해 복구 모드로 전환해야 합니다. 이 작업은 별도의 작업으로 수행되며 Swagger API 웹 페이지에서 시작됩니다.
+
.. Disaster Recovery(재해 복구) 섹션으로 이동하여 '/4.6/Disasterrecovery/storage(4.6/Disasterrecovery/storage)'를 클릭합니다.
.. 사용자 인증 토큰을 붙여 넣습니다.
.. SmSetDisasterRecoverySettingsRequest 섹션에서 EnableDisasterRecover 를 true 로 변경합니다.
.. 실행 을 클릭하여 SQL Server에 대한 재해 복구 모드를 활성화합니다.
+
image:dr-vmc-aws-image52.png["오류: 그래픽 이미지가 없습니다"]

+

NOTE: 추가 절차에 대한 설명을 참조하십시오.





link:aws-guest-dr-restore-veeam-full.html["다음으로, Veeam 전체 복원으로 애플리케이션 VM을 복구합니다."]
