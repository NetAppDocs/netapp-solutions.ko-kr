---
sidebar: sidebar 
permalink: containers/rh-os-n_use_case_rosa_solution_snapshot_app.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift Service on AWS, 
summary: NetApp ONTAP가 포함된 AWS 기반 Red Hat OpenShift Service 
---
= NetApp ONTAP가 포함된 AWS 기반 Red Hat OpenShift Service
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
** 1. 앱 볼륨 스냅샷 만들기** 이 섹션에서는 앱과 연결된 볼륨의 Trident 스냅샷을 만드는 방법을 보여 줍니다. 이것은 앱 데이터의 특정 시점 복제본입니다. 애플리케이션 데이터가 손실되면 이 시점 복사본에서 데이터를 복구할 수 있습니다. 참고: 이 스냅샷은 ONTAP(사내 또는 클라우드)의 원래 볼륨과 동일한 애그리게이트에 저장됩니다. 따라서 ONTAP 스토리지 Aggregate가 손실되면 해당 스냅샷에서 앱 데이터를 복구할 수 없습니다.

** a. VolumeSnapshotClass 생성 volume-snapshot-class.yaml이라는 파일에 다음 매니페스트를 저장합니다

[source]
----
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshotClass
metadata:
 name: fsx-snapclass
driver: csi.trident.netapp.io
deletionPolicy: Delete
----
위의 매니페스트를 사용하여 스냅샷을 만듭니다.

image:redhat_openshift_container_rosa_image20.png["스냅샷 클래스입니다"]

** b. 그런 다음 스냅샷을 생성합니다** VolumeSnapshot을 생성하여 PostgreSQL 데이터의 시점 복제본을 생성하여 기존 PVC의 스냅샷을 생성합니다. 이렇게 하면 파일 시스템 백엔드에서 공간을 거의 차지하지 않는 FSx 스냅샷이 생성됩니다. 다음 매니페스트를 volume-snapshot.yaml이라는 파일에 저장합니다.

[source]
----
apiVersion: snapshot.storage.k8s.io/v1
kind: VolumeSnapshot
metadata:
 name: postgresql-volume-snap-01
spec:
 volumeSnapshotClassName: fsx-snapclass
 source:
   persistentVolumeClaimName: data-postgresql-0
----
** C. 볼륨 스냅샷을 생성하고 볼륨 스냅샷이 생성되었는지 확인합니다**

데이터 손실을 시뮬레이션하기 위해 데이터베이스를 삭제합니다(데이터 손실은 다양한 이유로 발생할 수 있습니다. 여기서는 데이터베이스를 삭제하여 시뮬레이션합니다.)

image:redhat_openshift_container_rosa_image21.png["볼륨 스냅샷입니다"]

** d. 데이터 손실을 시뮬레이션하기 위해 데이터베이스를 삭제합니다(데이터 손실은 다양한 이유로 발생할 수 있습니다. 여기서는 데이터베이스를 삭제하여 시뮬레이션합니다.)**

image:redhat_openshift_container_rosa_image22.png["데이터베이스 연결"]

image:redhat_openshift_container_rosa_image23.png["데이터베이스를 삭제합니다"]
