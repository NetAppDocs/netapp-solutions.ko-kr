---
sidebar: sidebar 
permalink: databases/aws_ora_fsx_ec2_factors.html 
summary: 이 섹션에서는 AWS EC2 인스턴스 및 FSx 스토리지에 Oracle 데이터베이스를 구축할 때 고려해야 할 요소에 대해 자세히 설명합니다. 
keywords: HA, DR, database, Oracle, RDS, AWS, SnapCenter 
---
= Oracle 데이터베이스 구축에 고려해야 할 요인
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
퍼블릭 클라우드는 다양한 컴퓨팅 및 스토리지 옵션을 제공하므로 정확한 유형의 컴퓨팅 인스턴스 및 스토리지 엔진을 사용하여 데이터베이스를 구축할 수 있습니다. 또한 Oracle 데이터베이스에 최적화된 컴퓨팅 및 스토리지 구성을 선택해야 합니다.

다음 섹션에서는 FSx 스토리지가 있는 EC2 인스턴스의 AWS 퍼블릭 클라우드에서 Oracle 데이터베이스를 구축할 때의 주요 고려 사항에 대해 설명합니다.



== VM 성능

공용 클라우드에서 관계형 데이터베이스의 성능을 최적화하려면 올바른 VM 크기를 선택하는 것이 중요합니다. 더 나은 성능을 위해 데이터베이스 워크로드에 최적화된 EC2 M5 Series 인스턴스를 Oracle 구축에 사용하는 것이 좋습니다. AWS에서 Oracle용 RDS 인스턴스를 실행하는 데에도 같은 인스턴스 유형이 사용됩니다.

* 워크로드 특성에 따라 올바른 vCPU 및 RAM 조합을 선택합니다.
* VM에 스왑 공간을 추가합니다. 기본 EC2 인스턴스 구축은 데이터베이스에 적합하지 않은 스왑 공간을 생성하지 않습니다.




== 스토리지 레이아웃 및 설정

권장되는 스토리지 레이아웃은 다음과 같습니다.

* NFS 스토리지의 경우 권장되는 볼륨 레이아웃은 세 개의 볼륨입니다. 하나는 Oracle 바이너리용이고, 다른 하나는 Oracle 데이터 및 중복 제어 파일용이며, 다른 하나는 Oracle 액티브 로그, 아카이브 로그 및 제어 파일용입니다.
+
image:aws_ora_fsx_ec2_stor_12.png["입력/출력 대화 상자 또는 작성된 내용을 표시하는 그림"]

* iSCSI 스토리지의 경우 권장되는 볼륨 레이아웃은 Oracle 바이너리용 볼륨 1개, Oracle 데이터 및 중복 제어 파일용 볼륨 1개, Oracle 액티브 로그, 아카이브 로그 및 제어 파일용 볼륨 3개입니다. 그러나 각 데이터 및 로그 볼륨에는 4개의 LUN이 포함되어 있어야 합니다. LUN은 HA 클러스터 노드에서 균형을 유지하는 것이 이상적입니다.
+
image:aws_ora_fsx_ec2_stor_13.png["입력/출력 대화 상자 또는 작성된 내용을 표시하는 그림"]

* 스토리지 IOPS 및 처리량의 경우 FSx 스토리지 클러스터의 프로비저닝된 IOPS 및 처리량에 대한 임계값을 선택할 수 있으며, 워크로드가 변경될 때마다 이러한 매개 변수를 즉석에서 조정할 수 있습니다.
+
** 자동 IOPS 설정은 할당된 스토리지 용량 또는 최대 80,000개의 사용자 정의 스토리지 용량(GiB)당 3IOPS입니다.
** 처리량 수준은 128, 256, 512, 1024, 2045Mbps와 같이 증가합니다.




를 검토합니다 link:https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/performance.html["NetApp ONTAP 성능을 위한 Amazon FSx"^] 처리량 및 IOPS 사이징 관련 문서



== NFS 구성

가장 일반적인 운영 체제인 Linux에는 네이티브 NFS 기능이 포함되어 있습니다. Oracle은 Oracle에 기본적으로 통합된 직접 NFS(dNFS) 클라이언트를 제공합니다. Oracle은 20년 이상 NFSv3을 지원해 왔습니다. dNFS는 모든 버전의 Oracle에서 NFSv3에서 지원됩니다. NFSv4 표준을 따르는 모든 OS에서 NFSv4가 지원됩니다. NFSv4를 지원하는 dNFS를 지원하려면 Oracle 12.1.0.2 이상이 필요합니다. NFSv4.1은 특정 OS 지원이 필요합니다. 지원되는 OS에 대해서는 NetApp 상호 운용성 매트릭스 툴(IMT)을 참조하십시오. NFSv4.1에 대한 dNFS 지원을 위해서는 Oracle 버전 19.3.0.0 이상이 필요합니다.

NetApp 자동화 툴킷을 사용하여 자동화된 Oracle 구축은 NFSv3에서 dNFS를 자동으로 구성합니다.

기타 고려 사항:

* TCP 슬롯 테이블은 호스트 버스 어댑터(HBA) 큐 길이(queue depth)와 동등한 NFS의 기능입니다. 이들 테이블은 한 번에 수행될 수 있는 최대 NFS 작업의 수를 제어합니다. 기본값은 보통 16이며 최적의 성능을 발휘하기에 너무 낮습니다. 최신 Linux 커널에서는 반대의 문제가 발생하는데, 요청을 통해 NFS 서버를 포화시키는 수준까지 TCP 슬롯 테이블의 한계를 자동으로 높일 수 있습니다.
+
최적의 성능을 제공하고 성능 문제를 방지하려면 TCP 슬롯 테이블을 제어하는 커널 매개 변수를 128로 조정합니다.

+
[source, cli]
----
sysctl -a | grep tcp.*.slot_table
----
* 다음 표에는 Linux NFSv3 - 단일 인스턴스에 대한 권장 NFS 마운트 옵션이 나와 있습니다.
+
image:aws_ora_fsx_ec2_nfs_01.png["입력/출력 대화 상자 또는 작성된 내용을 표시하는 그림"]




NOTE: dNFS를 사용하기 전에 Oracle Doc 1495104.1에 설명된 패치가 설치되어 있는지 확인하십시오. NFSv3 및 NFSv4에 대한 NetApp Support Matrix에는 특정 운영 체제가 포함되어 있지 않습니다. RFC를 따르는 모든 OS가 지원됩니다. 온라인 IMT에서 NFSv3 또는 NFSv4 지원을 검색할 때 일치하는 항목이 표시되지 않으므로 특정 OS를 선택하지 마십시오. 모든 OS는 일반 정책에 의해 암시적으로 지원됩니다.



== 고가용성

솔루션 아키텍처에 설명된 대로 HA는 스토리지 레벨 복제를 기반으로 합니다. 따라서 Oracle의 시작 및 가용성은 컴퓨팅 및 스토리지를 얼마나 빠르게 가동 및 복구할 수 있는지에 따라 다릅니다. 다음 주요 요소를 참조하십시오.

* 대기 컴퓨팅 인스턴스를 준비하고 두 호스트에 대한 Ansible 병렬 업데이트를 통해 기본 컴퓨팅 인스턴스와 동기화하십시오.
* 맨 마지막에 Oracle을 설치할 필요가 없도록 기본 볼륨에서 바이너리 볼륨을 복제하고 설치 및 패치 작업을 수행해야 하는 항목을 파악할 수 있습니다.
* 복제 빈도는 서비스를 사용할 수 있도록 Oracle 데이터베이스를 복구하는 속도를 나타냅니다. 복제 빈도와 스토리지 소비는 서로 상충됩니다.
* 자동화를 활용하여 복구를 수행하고 인적 오류 없이 신속하게 대기 상태로 전환합니다. NetApp은 이러한 목적을 위한 자동화 툴킷을 제공합니다.

