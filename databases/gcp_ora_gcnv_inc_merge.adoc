---
sidebar: sidebar 
permalink: databases/gcp_ora_gcnv_inc_merge.html 
keywords: Oracle, GCP, GCNV, Database, NFS, dNFS, VLDB, RMAN, Incremental Merge 
summary: 이 솔루션은 NFS 마운트를 통해 Google Cloud NetApp Volumes 스토리지 풀에 배포된 Oracle VLDB를 빠르게 복구하고 RMAN을 통해 지속적으로 증분 병합되는 대기 데이터베이스 복사본을 준비하는 방법에 대한 개요와 세부 정보를 제공합니다. 
---
= TR-5007: Google Cloud NetApp Volumes에서 서버 내 증분 병합을 통해 Oracle VLDB 백업 및 복구 최적화
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


Allen Cao, Niyaz Mohamed, NetApp

[role="lead"]
이 솔루션은 NFS 마운트를 통해 Google Cloud NetApp Volumes 스토리지 풀에 배포된 Oracle VLDB를 빠르게 복구하고 RMAN을 통해 지속적으로 증분 병합되는 대기 데이터베이스 복사본을 준비하는 방법에 대한 개요와 세부 정보를 제공합니다.



== 목적

Oracle RMAN(Recovery Manager) 백업 툴을 사용하여 Oracle에서 매우 큰 데이터베이스(VLDB)를 복구하는 것은 매우 어려운 작업이 될 수 있습니다. 오류가 발생할 경우 백업 미디어에서 데이터베이스 복원 프로세스를 수행하는 데 시간이 오래 걸릴 수 있으므로 데이터베이스 복구가 지연되고 서비스 수준 계약(SLA)에 상당한 영향을 줄 수 있습니다. 클라우드에 구축된 Oracle VLDB의 상황은 더욱 악화되고 있습니다. 비용 문제로 인해 RMAN 백업이 일반적으로 객체 스토리지로 스트리밍되기 때문입니다. 따라서 SLA가 필수적인 경우 VLDB를 복원하고 복구하는 것은 불가능합니다. Oracle은 10g 버전부터 사용자가 DB 서버 호스트에 있는 추가 디스크 스토리지에 Oracle 데이터베이스 데이터 파일의 단계적 이미지 복사본을 생성할 수 있는 RMAN 기능을 도입했습니다. 이러한 이미지 복사본은 RMAN을 사용하여 사용자가 정의한 간격으로 증분 업데이트할 수 있습니다. 장애가 발생할 경우 DBA(데이터베이스 관리자)가 Oracle 데이터베이스를 실패한 미디어에서 이미지 복사본으로 신속하게 전환하여 전체 데이터베이스 미디어 복원이 필요하지 않게 할 수 있습니다. 그 결과, 필요한 데이터베이스 스토리지가 2배로 증가했지만 SLA가 크게 개선되었습니다.

VLDB에 대한 SLA를 준수하고 Oracle 데이터베이스를 Google Cloud Platform(GCP)과 같은 퍼블릭 클라우드로 이전하는 것을 고려하고 있다면, Google Cloud NetApp Volumes(GCNV)와 같은 리소스를 사용하여 스탠바이 데이터베이스 이미지 복사본을 스테이징하는 유사한 데이터베이스 보호 구조를 설정할 수 있습니다. GCNV는 Google에서 제공하는 완전 관리형 고성능 파일 스토리지 서비스로, Oracle 데이터베이스와 같은 까다로운 엔터프라이즈 애플리케이션을 Google Cloud에서 마이그레이션하고 실행하는 것을 더 쉽고, 안전하고, 비용 효율적으로 만들어 줍니다. 다양한 서비스 수준을 통해 스토리지 비용을 유연하게 제어하는 동시에 거의 0에 가까운 RPO(복구 목표 시점)와 관리 가능한 RTO(복구 목표 시점)를 달성할 수 있습니다. 이 문서에서는 GCNV 스토리지 풀에서 NFS 파일 시스템을 프로비저닝하고 내보내 Oracle 데이터베이스 서버에 마운트하여 기본 스토리지 장애 발생 시 신속한 복구를 위한 스탠바이 데이터베이스 복사본을 스테이징하는 방법을 보여줍니다.

이 솔루션은 다음과 같은 사용 사례를 해결합니다.

* RMAN을 통해 Oracle 데이터베이스 데이터 파일 이미지 복사 백업을 Google Cloud NetApp Volumes 스토리지 풀의 서버 내 NFS 파일 시스템에 저장합니다.
* 동일하거나 대기 중인 Google Compute Engine VM에서 장애가 발생할 경우 Oracle VLDB를 빠르게 복구합니다.
* 몇 분 안에 스테이징 DB 이미지 복사본에서 다른 사용 사례를 위해 복제 호스트에 Oracle 데이터베이스 복사본을 복제합니다.




== 대상

이 솔루션은 다음과 같은 사용자를 대상으로 합니다.

* Google Cloud Platform에서 Oracle VLDB를 설정하고 관리하는 DBA입니다.
* Google Cloud Platform에서 Oracle 워크로드를 테스트하는 데이터베이스 솔루션 아키텍트입니다.
* GCNV 스토리지 풀에 배포된 Oracle 데이터베이스를 관리하는 스토리지 관리자입니다.
* Google Cloud Platform에 Oracle 데이터베이스를 구축하려는 애플리케이션 소유자입니다.




== 솔루션 테스트 및 검증 환경

이 솔루션의 테스트와 검증은 최종 배포 환경과 일치하지 않을 수 있는 Google Cloud NetApp Volumes 스토리지 풀과 Google Compute Engine VM에서 수행되었습니다. 자세한 내용은 섹션을 참조하십시오 <<구축 시 고려해야 할 주요 요소>>.



=== 있습니다

image:gcp_ora_gcnv_inc_merge_archit.png["이 이미지는 GCNV를 사용하여 Google Cloud에서 Oracle VLDB 증분 병합을 구현한 자세한 그림을 제공합니다."]



=== 하드웨어 및 소프트웨어 구성 요소

[cols="33%, 33%, 33%"]
|===


3+| * 하드웨어 * 


| Google Cloud NetApp Volumes 스토리지 풀 | 현재 Google에서 제공하는 서비스 | 프리미엄 서비스를 제공하는 경우 2TiB 스토리지 풀, 표준 서비스를 제공하는 경우 2TiB 스토리지 풀 


| DB 서버용 Google Compute Engine VM | N1(vCPU 4개, 15GiB 메모리) | 2개의 VM, 하나는 기본 DB 서버로, 다른 하나는 대기 또는 복제 DB 서버로 사용 


3+| * 소프트웨어 * 


| RedHat Linux | Red Hat Enterprise Linux 8.10(Ootpa) - x86/64 | RHEL Marketplace 이미지, PAYG 


| Oracle Grid Infrastructure | 버전 19.18 | RU 패치 p34762026_190000_Linux-x86-64.zip 를 적용했습니다 


| Oracle 데이터베이스 | 버전 19.18 | RU 패치 p34765931_190000_Linux-x86-64.zip 를 적용했습니다 


| dNFS OneOff 패치 | p32931941_190000_Linux-x86-64.zip | 그리드와 데이터베이스 모두에 적용됩니다 


| Oracle OPatch | 버전 12.2.0.1.36 | 최신 패치 p6880880_190000_Linux-x86-64.zip 


| NFS 를 참조하십시오 | 버전 3.0 | Oracle dNFS가 설정되었습니다 


| Ansible | 버전 코어 2.16.2 | Python 버전 - 3.10.13 
|===


=== 구축 시 고려해야 할 주요 요소

* *GCNV 스토리지 풀 서비스 수준.* GCNV 스토리지 풀은 Standard, Premium, Extreme, Flex의 네 가지 서비스 수준을 제공합니다. 기본적으로 스토리지 풀 내에 생성된 볼륨에는 자동 QoS가 적용되어 볼륨의 크기와 서비스 수준에 따라 처리량을 제한합니다. 유일한 예외는 Flex 스토리지 풀에서 할당된 볼륨이 스토리지 풀에서 사용 가능한 처리량을 공유한다는 것입니다.
* *RMAN 증분 병합을 위한 Oracle VLDB 서버 내 백업 스토리지 제한.* 테스트 및 검증 과정에서 Oracle 증분 백업 및 병합을 위한 NFS 볼륨은 표준 서비스 수준의 단일 GCNV 스토리지 풀에서 할당되었으며, 이 풀의 용량 제한은 200TiB입니다. 이 임계값을 초과하는 배포의 경우, 여러 개의 GCNV 스토리지 풀을 여러 NFS 마운트 지점과 병렬로 구현하여 더 높은 용량을 제공할 수 있습니다.
* *RMAN 증분 병합을 사용한 Oracle 복구 기능.* RMAN 서버 내 증분 백업 및 병합은 일반적으로 RTO 및 RPO 목표에 따라 사용자 정의 빈도로 실행됩니다. 기본 데이터베이스 파일 스토리지 및/또는 보관된 로그가 완전히 손실되면 데이터 손실이 발생할 수 있습니다. Oracle 데이터베이스는 서버 내 데이터베이스 백업 이미지 사본에서 사용 가능한 마지막 증분 백업까지 복구할 수 있습니다. 데이터 손실을 최소화하려면 GCNV NFS 백업 마운트 지점에 Oracle 플래시 복구 영역을 설정하고, 장애 발생 시 보관된 로그를 데이터베이스 이미지 사본과 함께 동일한 NFS 마운트에 백업하여 데이터베이스를 마지막 보관된 로그로 롤포워드해야 합니다. 따라서 거의 제로에 가까운 RPO를 달성할 수 있습니다.
* *GCNV 스토리지 풀에서 Oracle VLDB NFS 이미지 백업을 실행합니다.* 이 시점에서는 데이터베이스 볼륨 서비스 수준을 표준에서 프리미엄 또는 익스트림으로 재할당하는 것은 지원되지 않습니다. 하지만 프리미엄에서 익스트림으로 서비스 수준을 재할당하는 것은 지원됩니다. 장애 발생 후 장기간 이미지 복사본에서 데이터베이스를 실행하려면 프리미엄 스토리지 풀에서 데이터베이스 이미지 복사본 백업 볼륨을 할당하는 것이 좋습니다.
* *Google Compute Engine VM* 테스트 및 검증 과정에서 N1 유형의 GCE VM 인스턴스를 Oracle 데이터베이스 서버로 사용했습니다. 데이터베이스 워크로드에 더 최적화되고 더 적합한 다른 유형의 GCE VM도 있습니다. 실제 워크로드 요구 사항을 기반으로 vCPU 수와 RAM 용량에 맞게 VM 크기를 적절히 조정하세요.
* *dNFS 구성.* dNFS는 Oracle 커널에 내장되어 있으며, Oracle을 NFS 스토리지에 배포할 때 Oracle 데이터베이스 성능을 크게 향상시키는 것으로 알려져 있습니다. dNFS는 Oracle 바이너리에 패키징되어 있지만 기본적으로 활성화되어 있지 않습니다. NFS 기반 Oracle 데이터베이스 구축 시 이 기능을 설정해야 합니다. VLDB에 여러 GCNV 스토리지 풀을 배포하는 경우, 서로 다른 GCNV 스토리지 풀에 대한 dNFS 다중 경로를 올바르게 구성해야 합니다.




== 솔루션 구축

이 솔루션은 Oracle VLDB가 VPC 내 Google Cloud 환경에 이미 배포되어 있다고 가정합니다. Oracle VLDB는 GCNV 스토리지 또는 Google Cloud 에코시스템 내의 다른 스토리지 옵션에서 실행될 수 있습니다. 다음 섹션에서는 RMAN을 통해 GCNV 스토리지 풀에서 마운트된 NFS 파일 시스템에 Oracle VLDB 이미지 백업 및 증분 병합을 설정하는 단계별 배포 절차를 제공합니다. Oracle VLDB는 또한 다른 GCNV 스토리지 풀에 기본 스토리지를 호스팅합니다.



=== 배포를 위한 사전 요구 사항

[%collapsible%open]
====
배포에는 다음과 같은 사전 요구 사항이 필요합니다.

. GCP 계정이 설정되었고, Google Cloud 계정의 프로젝트 내에 필요한 VPC 및 네트워크 구성이 생성되었습니다.
. Google Cloud 포털 콘솔에서 설명서를 따르세요. link:https://cloud.google.com/netapp/volumes/docs/configure-and-use/storage-pools/create-storage-pool["스토리지 풀을 생성합니다"^] 아래와 같이 표준 서비스로 GCNV 스토리지 풀을 생성합니다.
+
image:gcp_ora_gcnv_inc_merge_pool_01.png["이 이미지는 Google Cloud Portal 콘솔의 GCNV 스토리지 풀 화면을 보여줍니다."]

. Google Cloud 포털 콘솔에서 설명서를 따르세요. link:https://cloud.google.com/netapp/volumes/docs/configure-and-use/volumes/create-volume["볼륨을 생성합니다"^] 서버 내 Oracle VLDB 이미지 백업을 위한 볼륨을 생성합니다. 이 솔루션 데모에서는 아래와 같이 Oracle VLDB 기본 스토리지도 GCNV에 호스팅됩니다.
+
image:gcp_ora_gcnv_inc_merge_vol_02.png["이 이미지는 Google Cloud Portal 콘솔의 GCNV 스토리지 볼륨 화면을 보여줍니다."]



====


=== GCNV에서 기본 Oracle VLDB 서버로 NFS 볼륨 마운트

[%collapsible%open]
====
Oracle VLDB 서버 내 백업을 위해 프로비저닝된 GCNV 볼륨은 더 나은 성능을 위해 기본 DB 서버 및 기본 저장소와 동일한 Google Cloud 영역에 위치해야 합니다.

. Google Cloud 콘솔에서 GCNV 볼륨 NFS 내보내기 경로를 검색합니다.
+
image:gcp_ora_gcnv_inc_merge_vol_03.png["이 이미지는 Google Cloud Portal 콘솔의 GCNV 스토리지 볼륨 화면을 보여줍니다."]

. 기본 Oracle VLDB 서버에 로그인합니다. 루트 권한으로 GCNV 저장소에서 내보낸 NFS 볼륨을 마운트합니다. 필요에 따라 NFS 서버 IP 주소와 파일 경로를 변경합니다.
+
[source, cli]
----
sudo mkdir /nfsgcnv
----
+
[source, cli]
----
mount 10.165.128.5:/orap-bkup /nfsgcnv -o rw,bg,hard,vers=3,proto=tcp,timeo=600,rsize=262144,wsize=262144
----
. 마운트 지점 소유권을 oracle:oisntall로 변경하거나, 필요에 따라 oracle 사용자 이름과 기본 그룹을 변경합니다.
+
[source, cli]
----
sudo chown oracle:oinstall /nfsgcnv
----
. /etc/fstab에 NFS 마운트를 추가합니다.
+
[source, cli]
----
sudo vi /etc/fstab
----


====


=== 서버 내 VLDB 백업을 위해 GCNV에서 Oracle RMAN 증분 병합을 이미지 복사로 설정합니다.

[%collapsible%open]
====
RMAN 증분 병합은 모든 증분 백업/병합 간격마다 스테이징 데이터베이스 데이터 파일 이미지 복사본을 지속적으로 업데이트합니다. 데이터베이스 백업의 이미지 복사본은 증분 백업/병합을 실행하는 빈도만큼 최신 상태가 됩니다. 따라서 RMAN 증분 백업 및 병합의 빈도를 결정할 때 데이터베이스 성능, RTO 및 RPO 목표를 고려해야 합니다.

. 운영 Oracle VLDB 서버에 Oracle 사용자로 로그인합니다.
. 이 솔루션 검증을 위해 기본 데이터베이스는 아래와 같이 그리드 인프라 재시작 구성을 갖춘 독립형 서버로 설정됩니다. 기본 스토리지는 프리미엄 서비스가 제공되는 GCNV 스토리지 풀에 호스팅됩니다. 다시 한번 강조하지만, 이는 필수 사항은 아니며 기본 스토리지는 Google Cloud의 다른 스토리지 옵션에 배치할 수 있습니다.
+
....

[oracle@orap ~]$ df -h
Filesystem               Size  Used Avail Use% Mounted on
devtmpfs                 7.2G     0  7.2G   0% /dev
tmpfs                    7.3G  1.1G  6.2G  16% /dev/shm
tmpfs                    7.3G  8.5M  7.2G   1% /run
tmpfs                    7.3G     0  7.3G   0% /sys/fs/cgroup
/dev/sda2                 50G   22G   29G  43% /
/dev/sda1                200M  5.9M  194M   3% /boot/efi
10.165.128.5:/orap-u02   250G  203G   48G  81% /u02
10.165.128.5:/orap-u07   250G  203G   48G  82% /u07
10.165.128.5:/orap-u06   250G  203G   48G  81% /u06
10.165.128.5:/orap-u04   250G  203G   48G  81% /u04
10.165.128.5:/orap-u05   250G  203G   48G  82% /u05
10.165.128.5:/orap-bkup  2.0T  918G  1.2T  45% /nfsgcnv
10.165.128.5:/orap-u03   250G  202G   49G  81% /u03
10.165.128.4:/orap-u01   200G   21G  180G  11% /u01
10.165.128.5:/orap-u08   300G  201G  100G  67% /u08
tmpfs                    1.5G     0  1.5G   0% /run/user/54321

[oracle@orap ~]$ crsctl stat res -t
--------------------------------------------------------------------------------
Name           Target  State        Server                   State details
--------------------------------------------------------------------------------
Local Resources
--------------------------------------------------------------------------------
ora.DATA.dg
               ONLINE  ONLINE       orap                     STABLE
ora.LISTENER.lsnr
               ONLINE  ONLINE       orap                     STABLE
ora.LOGS.dg
               ONLINE  ONLINE       orap                     STABLE
ora.asm
               ONLINE  ONLINE       orap                     Started,STABLE
ora.ons
               OFFLINE OFFLINE      orap                     STABLE
--------------------------------------------------------------------------------
Cluster Resources
--------------------------------------------------------------------------------
ora.cssd
      1        ONLINE  ONLINE       orap                     STABLE
ora.diskmon
      1        OFFLINE OFFLINE                               STABLE
ora.evmd
      1        ONLINE  ONLINE       orap                     STABLE
ora.ntap.db
      1        ONLINE  ONLINE       orap                     Open,HOME=/u01/app/o
                                                             racle/product/19.0.0
                                                             /NTAP,STABLE
--------------------------------------------------------------------------------


[oracle@orap ~]$ asmcmd
ASMCMD> lsdg
State    Type    Rebal  Sector  Logical_Sector  Block       AU  Total_MB  Free_MB  Req_mir_free_MB  Usable_file_MB  Offline_disks  Voting_files  Name
MOUNTED  EXTERN  N         512             512   4096  4194304   1228800  1150288                0         1150288              0             N  DATA/
MOUNTED  EXTERN  N         512             512   4096  4194304    204800   204636                0          204636              0             N  LOGS/
ASMCMD> lsdsk
Path
/u02/oradata/asm/orap_data_disk_01
/u02/oradata/asm/orap_data_disk_02
/u02/oradata/asm/orap_data_disk_03
/u02/oradata/asm/orap_data_disk_04
/u03/oradata/asm/orap_data_disk_05
/u03/oradata/asm/orap_data_disk_06
/u03/oradata/asm/orap_data_disk_07
/u03/oradata/asm/orap_data_disk_08
/u04/oradata/asm/orap_data_disk_09
/u04/oradata/asm/orap_data_disk_10
/u04/oradata/asm/orap_data_disk_11
/u04/oradata/asm/orap_data_disk_12
/u05/oradata/asm/orap_data_disk_13
/u05/oradata/asm/orap_data_disk_14
/u05/oradata/asm/orap_data_disk_15
/u05/oradata/asm/orap_data_disk_16
/u06/oradata/asm/orap_data_disk_17
/u06/oradata/asm/orap_data_disk_18
/u06/oradata/asm/orap_data_disk_19
/u06/oradata/asm/orap_data_disk_20
/u07/oradata/asm/orap_data_disk_21
/u07/oradata/asm/orap_data_disk_22
/u07/oradata/asm/orap_data_disk_23
/u07/oradata/asm/orap_data_disk_24
/u08/oralogs/asm/orap_logs_disk_01
/u08/oralogs/asm/orap_logs_disk_02
/u08/oralogs/asm/orap_logs_disk_03
/u08/oralogs/asm/orap_logs_disk_04


....
. 마운트 지점 /nfsgcnv 아래에 oracopy 디렉토리를 만들어 oracle 데이터 파일 이미지 복사본을 저장하고, Oracle 플래시 복구 영역용 archlog 디렉토리를 만듭니다.
+
[source, cli]
----
mkdir /nfsgcnv/oracopy
----
+
[source, cli]
----
mkdir /nfsgcnv/archlog
----
. sqlplus 를 통해 Oracle 데이터베이스에 로그인하고, 더 빠른 증분 백업을 위해 블록 변경 추적을 활성화하고, 현재 운영 스토리지에 있는 경우 Oracle 플래시 복구 영역을 GCNV NFS 마운트로 변경합니다. 이를 통해 RMAN 기본 제어 파일/spfile 자동 백업 및 보관 로그를 GCNV NFS 마운트에 백업하여 마지막으로 사용 가능한 보관 로그로 데이터베이스를 복구할 수 있습니다.
+
[source, cli]
----
sqlplus / as sysdba
----
+
sqlplus 프롬프트에서 다음 명령을 실행합니다.

+
[source, cli]
----
alter database enable block change tracking using file '/nfsgcnv/oracopy/bct_ntap.ctf'
----
+
[source, cli]
----
alter system set db_recovery_file_dest='/nfsgcnv/archlog/' scope=both;
----
+
예상 출력:

+
....
[oracle@orap ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed Mar 20 16:44:21 2024
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.

Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> alter database enable block change tracking using file '/nfsgcnv/oracopy/bct_ntap.ctf';

Database altered.

SQL> alter system set db_recovery_file_dest='/nfsgcnv/archlog/' scope=both;

System altered.

SQL> alter system set db_recovery_file_dest_size = 400G scope=both;

System altered.

SQL> show parameter recover

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
db_recovery_file_dest                string      /nfsgcnv/archlog/
db_recovery_file_dest_size           big integer 400G
db_unrecoverable_scn_tracking        boolean     TRUE
recovery_parallelism                 integer     0
remote_recovery_file_dest            string
SQL>

....
. RMAN 백업 및 증분 병합 스크립트를 생성합니다. 이 스크립트는 병렬 RMAN 백업 및 병합을 위해 여러 채널을 할당합니다. 첫 번째 실행에서는 초기 전체 기준선 이미지 복사본이 생성됩니다. 전체 실행에서 먼저 보존 기간 외부에 있는 폐기된 백업을 정리하여 스테이징 영역을 깨끗하게 유지합니다. 그런 다음 병합 및 백업 전에 현재 로그 파일을 전환합니다. 증분 백업은 병합 후에 데이터베이스 이미지 복사본이 현재 데이터베이스 상태를 하나의 백업/병합 주기로 후행 하도록 합니다. 병합 및 백업 순서를 반대로 하면 사용자가 원하는 대로 신속하게 복구할 수 있습니다. RMAN 스크립트는 기본 DB 서버의 crontab에서 실행할 간단한 셸 스크립트로 통합할 수 있습니다. RMAN 설정에서 제어 파일 자동 백업이 켜져 있는지 확인합니다.
+
....
vi /home/oracle/rman_bkup_merge.cmd

Add following lines:

RUN
{
  allocate channel c1 device type disk format '/nfsgcnv/oracopy/%U';
  allocate channel c2 device type disk format '/nfsgcnv/oracopy/%U';
  allocate channel c3 device type disk format '/nfsgcnv/oracopy/%U';
  allocate channel c4 device type disk format '/nfsgcnv/oracopy/%U';
  delete obsolete;
  sql 'alter system archive log current';
  recover copy of database with tag 'OraCopyBKUPonGCNV_level_0';
  backup incremental level 1 copies=1 for recover of copy with tag 'OraCopyBKUPonGCNV_level_0' database;
}


....
. 운영 Oracle VLDB 서버에서 RMAN 카탈로그를 사용하거나 사용하지 않고 Oracle 사용자로 로컬 RMAN에 로그인합니다. 이 데모에서는 RMAN 카탈로그에 접속하지 않습니다.
+
....

rman target / nocatalog;

output:

[oracle@orap ~]$ rman target / nocatalog

Recovery Manager: Release 19.0.0.0.0 - Production on Wed Mar 20 16:54:24 2024
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: NTAP (DBID=1379265854)
using target database control file instead of recovery catalog

....
. RMAN 프롬프트에서 스크립트를 실행합니다. 첫 번째 실행에서는 기본 데이터베이스 이미지 복사본과 후속 실행이 기본 이미지 복사본을 점진적으로 병합하고 업데이트합니다. 다음은 스크립트 및 일반 출력을 실행하는 방법입니다. 호스트의 CPU 코어와 일치하는 채널 수를 설정합니다.
+
....

RMAN> @/home/oracle/rman_bkup_merge.cmd

RMAN> RUN
2> {
3>   allocate channel c1 device type disk format '/nfsgcnv/oracopy/%U';
4>   allocate channel c2 device type disk format '/nfsgcnv/oracopy/%U';
5>   allocate channel c3 device type disk format '/nfsgcnv/oracopy/%U';
6>   allocate channel c4 device type disk format '/nfsgcnv/oracopy/%U';
7>   delete obsolete;
8>   sql 'alter system archive log current';
9>   recover copy of database with tag 'OraCopyBKUPonGCNV_level_0';
10>   backup incremental level 1 copies=1 for recover of copy with tag 'OraCopyBKUPonGCNV_level_0' database;
11> }
allocated channel: c1
channel c1: SID=23 device type=DISK

allocated channel: c2
channel c2: SID=151 device type=DISK

allocated channel: c3
channel c3: SID=20 device type=DISK

allocated channel: c4
channel c4: SID=150 device type=DISK

RMAN retention policy will be applied to the command
RMAN retention policy is set to redundancy 1
Deleting the following obsolete backups and copies:
Type                 Key    Completion Time    Filename/Handle
-------------------- ------ ------------------ --------------------
Backup Set           1      22-MAY-25
  Backup Piece       1      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201793914.260.1201793917
Backup Set           2      22-MAY-25
  Backup Piece       2      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201795422.261.1201795425
Backup Set           3      22-MAY-25
  Backup Piece       3      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201797230.262.1201797231
Backup Set           4      22-MAY-25
  Backup Piece       4      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201799039.264.1201799041
Backup Set           5      22-MAY-25
  Backup Piece       5      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201802655.265.1201802659
Backup Set           6      22-MAY-25
  Backup Piece       6      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201803558.266.1201803561
Backup Set           7      22-MAY-25
  Backup Piece       7      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201805066.267.1201805069
Backup Set           8      22-MAY-25
  Backup Piece       8      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201806272.268.1201806275
Backup Set           9      22-MAY-25
  Backup Piece       9      22-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201807778.269.1201807781
Backup Set           10     23-MAY-25
  Backup Piece       10     23-MAY-25          +LOGS/NTAP/AUTOBACKUP/2025_05_23/s_1201874668.271.1201874669
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201793914.260.1201793917 RECID=1 STAMP=1201793917
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201799039.264.1201799041 RECID=4 STAMP=1201799040
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201795422.261.1201795425 RECID=2 STAMP=1201795424
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201803558.266.1201803561 RECID=6 STAMP=1201803561
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201797230.262.1201797231 RECID=3 STAMP=1201797231
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201802655.265.1201802659 RECID=5 STAMP=1201802658
deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201805066.267.1201805069 RECID=7 STAMP=1201805069
Deleted 2 objects

deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201806272.268.1201806275 RECID=8 STAMP=1201806275
Deleted 3 objects

deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_22/s_1201807778.269.1201807781 RECID=9 STAMP=1201807780
Deleted 2 objects

deleted backup piece
backup piece handle=+LOGS/NTAP/AUTOBACKUP/2025_05_23/s_1201874668.271.1201874669 RECID=10 STAMP=1201874669
Deleted 3 objects


sql statement: alter system archive log current

Starting recover at 23-MAY-25
no copy of datafile 1 found to recover
no copy of datafile 3 found to recover
no copy of datafile 4 found to recover
no copy of datafile 5 found to recover
no copy of datafile 6 found to recover
no copy of datafile 7 found to recover
no copy of datafile 8 found to recover
no copy of datafile 9 found to recover
no copy of datafile 10 found to recover
no copy of datafile 11 found to recover
no copy of datafile 12 found to recover
no copy of datafile 13 found to recover
no copy of datafile 14 found to recover
no copy of datafile 15 found to recover
no copy of datafile 16 found to recover
no copy of datafile 17 found to recover
no copy of datafile 18 found to recover
no copy of datafile 19 found to recover
no copy of datafile 20 found to recover
no copy of datafile 21 found to recover
no copy of datafile 22 found to recover
no copy of datafile 23 found to recover
no copy of datafile 24 found to recover
no copy of datafile 25 found to recover
no copy of datafile 26 found to recover
no copy of datafile 27 found to recover
no copy of datafile 28 found to recover
no copy of datafile 29 found to recover
no copy of datafile 30 found to recover
no copy of datafile 31 found to recover
no copy of datafile 32 found to recover
no copy of datafile 33 found to recover
no copy of datafile 34 found to recover
no copy of datafile 35 found to recover
no copy of datafile 36 found to recover
no copy of datafile 37 found to recover
no copy of datafile 38 found to recover
no copy of datafile 39 found to recover
no copy of datafile 40 found to recover
no copy of datafile 41 found to recover
no copy of datafile 42 found to recover
no copy of datafile 43 found to recover
no copy of datafile 44 found to recover
no copy of datafile 45 found to recover
no copy of datafile 46 found to recover
no copy of datafile 47 found to recover
no copy of datafile 48 found to recover
no copy of datafile 49 found to recover
no copy of datafile 50 found to recover
Finished recover at 23-MAY-25

Starting backup at 23-MAY-25
no parent backup or copy of datafile 1 found
no parent backup or copy of datafile 3 found
no parent backup or copy of datafile 4 found
no parent backup or copy of datafile 7 found
no parent backup or copy of datafile 6 found
no parent backup or copy of datafile 5 found
no parent backup or copy of datafile 8 found
no parent backup or copy of datafile 21 found
no parent backup or copy of datafile 22 found
no parent backup or copy of datafile 25 found
no parent backup or copy of datafile 28 found
no parent backup or copy of datafile 32 found
no parent backup or copy of datafile 33 found
no parent backup or copy of datafile 36 found
no parent backup or copy of datafile 41 found
no parent backup or copy of datafile 44 found
no parent backup or copy of datafile 46 found
no parent backup or copy of datafile 10 found
no parent backup or copy of datafile 9 found
no parent backup or copy of datafile 11 found
no parent backup or copy of datafile 12 found
no parent backup or copy of datafile 23 found
no parent backup or copy of datafile 26 found
no parent backup or copy of datafile 29 found
no parent backup or copy of datafile 30 found
no parent backup or copy of datafile 34 found
no parent backup or copy of datafile 37 found
no parent backup or copy of datafile 39 found
no parent backup or copy of datafile 42 found
no parent backup or copy of datafile 47 found
no parent backup or copy of datafile 48 found
no parent backup or copy of datafile 14 found
no parent backup or copy of datafile 13 found
no parent backup or copy of datafile 15 found
no parent backup or copy of datafile 16 found
no parent backup or copy of datafile 24 found
no parent backup or copy of datafile 27 found
no parent backup or copy of datafile 31 found
no parent backup or copy of datafile 35 found
no parent backup or copy of datafile 38 found
no parent backup or copy of datafile 40 found
no parent backup or copy of datafile 43 found
no parent backup or copy of datafile 45 found
no parent backup or copy of datafile 49 found
no parent backup or copy of datafile 50 found
no parent backup or copy of datafile 18 found
no parent backup or copy of datafile 17 found
no parent backup or copy of datafile 19 found
no parent backup or copy of datafile 20 found
channel c1: starting datafile copy
input datafile file number=00021 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
channel c2: starting datafile copy
input datafile file number=00022 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
channel c3: starting datafile copy
input datafile file number=00025 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
channel c4: starting datafile copy
input datafile file number=00028 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=4 STAMP=1201886858
channel c4: datafile copy complete, elapsed time: 01:19:26
channel c4: starting datafile copy
input datafile file number=00032 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=5 STAMP=1201886918
channel c3: datafile copy complete, elapsed time: 01:20:21
channel c3: starting datafile copy
input datafile file number=00033 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=6 STAMP=1201886943
channel c1: datafile copy complete, elapsed time: 01:20:50
channel c1: starting datafile copy
input datafile file number=00036 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=7 STAMP=1201887138
channel c2: datafile copy complete, elapsed time: 01:24:05
channel c2: starting datafile copy
input datafile file number=00041 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=8 STAMP=1201891753
channel c4: datafile copy complete, elapsed time: 01:21:26
channel c4: starting datafile copy
input datafile file number=00044 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=9 STAMP=1201891755
channel c1: datafile copy complete, elapsed time: 01:20:03
channel c1: starting datafile copy
input datafile file number=00046 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=10 STAMP=1201891766
channel c3: datafile copy complete, elapsed time: 01:20:44
channel c3: starting datafile copy
input datafile file number=00023 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=11 STAMP=1201892161
channel c2: datafile copy complete, elapsed time: 01:23:37
channel c2: starting datafile copy
input datafile file number=00026 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=12 STAMP=1201896617
channel c3: datafile copy complete, elapsed time: 01:20:53
channel c3: starting datafile copy
input datafile file number=00029 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=13 STAMP=1201896650
channel c1: datafile copy complete, elapsed time: 01:21:35
channel c1: starting datafile copy
input datafile file number=00030 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=14 STAMP=1201896694
channel c4: datafile copy complete, elapsed time: 01:22:20
channel c4: starting datafile copy
input datafile file number=00034 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=15 STAMP=1201897015
channel c2: datafile copy complete, elapsed time: 01:20:53
channel c2: starting datafile copy
input datafile file number=00037 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=16 STAMP=1201901480
channel c1: datafile copy complete, elapsed time: 01:20:37
channel c1: starting datafile copy
input datafile file number=00039 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=17 STAMP=1201901527
channel c3: datafile copy complete, elapsed time: 01:21:48
channel c3: starting datafile copy
input datafile file number=00042 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=18 STAMP=1201901805
channel c4: datafile copy complete, elapsed time: 01:25:14
channel c4: starting datafile copy
input datafile file number=00047 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=19 STAMP=1201901963
channel c2: datafile copy complete, elapsed time: 01:22:23
channel c2: starting datafile copy
input datafile file number=00048 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=20 STAMP=1201906343
channel c1: datafile copy complete, elapsed time: 01:20:55
channel c1: starting datafile copy
input datafile file number=00024 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=21 STAMP=1201906415
channel c3: datafile copy complete, elapsed time: 01:21:24
channel c3: starting datafile copy
input datafile file number=00027 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=22 STAMP=1201906737
channel c4: datafile copy complete, elapsed time: 01:22:15
channel c4: starting datafile copy
input datafile file number=00031 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=23 STAMP=1201906865
channel c2: datafile copy complete, elapsed time: 01:21:45
channel c2: starting datafile copy
input datafile file number=00035 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=24 STAMP=1201911205
channel c1: datafile copy complete, elapsed time: 01:21:03
channel c1: starting datafile copy
input datafile file number=00038 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=25 STAMP=1201911367
channel c3: datafile copy complete, elapsed time: 01:22:33
channel c3: starting datafile copy
input datafile file number=00040 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=26 STAMP=1201911632
channel c4: datafile copy complete, elapsed time: 01:21:33
channel c4: starting datafile copy
input datafile file number=00043 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=27 STAMP=1201911835
channel c2: datafile copy complete, elapsed time: 01:22:57
channel c2: starting datafile copy
input datafile file number=00045 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=28 STAMP=1201916184
channel c1: datafile copy complete, elapsed time: 01:23:06
channel c1: starting datafile copy
input datafile file number=00049 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=29 STAMP=1201916197
channel c3: datafile copy complete, elapsed time: 01:20:24
channel c3: starting datafile copy
input datafile file number=00050 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=30 STAMP=1201916471
channel c4: datafile copy complete, elapsed time: 01:20:40
channel c4: starting datafile copy
input datafile file number=00001 name=+DATA/NTAP/DATAFILE/system.257.1201727295
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=31 STAMP=1201916673
channel c4: datafile copy complete, elapsed time: 00:03:15
channel c4: starting datafile copy
input datafile file number=00003 name=+DATA/NTAP/DATAFILE/sysaux.258.1201727339
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=32 STAMP=1201916703
channel c2: datafile copy complete, elapsed time: 01:21:05
channel c2: starting datafile copy
input datafile file number=00004 name=+DATA/NTAP/DATAFILE/undotbs1.259.1201727365
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=33 STAMP=1201916821
channel c2: datafile copy complete, elapsed time: 00:01:55
channel c2: starting datafile copy
input datafile file number=00010 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=34 STAMP=1201916851
channel c4: datafile copy complete, elapsed time: 00:02:58
channel c4: starting datafile copy
input datafile file number=00014 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=35 STAMP=1201916936
channel c2: datafile copy complete, elapsed time: 00:01:52
channel c2: starting datafile copy
input datafile file number=00018 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=36 STAMP=1201916940
channel c4: datafile copy complete, elapsed time: 00:01:25
channel c4: starting datafile copy
input datafile file number=00006 name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=37 STAMP=1201917017
channel c4: datafile copy complete, elapsed time: 00:01:25
channel c4: starting datafile copy
input datafile file number=00009 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=38 STAMP=1201917035
channel c2: datafile copy complete, elapsed time: 00:01:34
channel c2: starting datafile copy
input datafile file number=00013 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=39 STAMP=1201917090
channel c4: datafile copy complete, elapsed time: 00:01:03
channel c4: starting datafile copy
input datafile file number=00017 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=40 STAMP=1201917097
channel c2: datafile copy complete, elapsed time: 00:01:00
channel c2: starting datafile copy
input datafile file number=00005 name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=42 STAMP=1201917174
channel c2: datafile copy complete, elapsed time: 00:01:25
channel c2: starting datafile copy
input datafile file number=00011 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=41 STAMP=1201917174
channel c4: datafile copy complete, elapsed time: 00:01:31
channel c4: starting datafile copy
input datafile file number=00008 name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=44 STAMP=1201917237
channel c2: datafile copy complete, elapsed time: 00:00:56
channel c2: starting datafile copy
input datafile file number=00015 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=43 STAMP=1201917232
channel c4: datafile copy complete, elapsed time: 00:00:55
channel c4: starting datafile copy
input datafile file number=00019 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=45 STAMP=1201917288
channel c2: datafile copy complete, elapsed time: 00:00:55
channel c2: starting datafile copy
input datafile file number=00007 name=+DATA/NTAP/DATAFILE/users.260.1201727365
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=46 STAMP=1201917295
channel c4: datafile copy complete, elapsed time: 00:00:55
channel c4: starting datafile copy
input datafile file number=00012 name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=47 STAMP=1201917297
channel c2: datafile copy complete, elapsed time: 00:00:02
channel c2: starting datafile copy
input datafile file number=00016 name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=48 STAMP=1201917297
channel c4: datafile copy complete, elapsed time: 00:00:01
channel c4: starting datafile copy
input datafile file number=00020 name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=49 STAMP=1201917298
channel c2: datafile copy complete, elapsed time: 00:00:01
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=50 STAMP=1201917298
channel c4: datafile copy complete, elapsed time: 00:00:01
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=51 STAMP=1201919158
channel c3: datafile copy complete, elapsed time: 00:49:26
output file name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=52 STAMP=1201919167
channel c1: datafile copy complete, elapsed time: 00:49:36
Finished backup at 24-MAY-25

Starting Control File and SPFILE Autobackup at 24-MAY-25
piece handle=/nfsgcnv/archlog/NTAP/autobackup/2025_05_24/o1_mf_s_1201919173_n32cl775_.bkp comment=NONE
Finished Control File and SPFILE Autobackup at 24-MAY-25
released channel: c1
released channel: c2
released channel: c3
released channel: c4

RMAN> **end-of-file**

RMAN>


....
. 백업 후 데이터베이스 이미지 복제본을 나열하여 GCNV NFS 마운트 지점에서 데이터베이스 이미지 복제본이 생성되었는지 확인합니다.
+
....
RMAN> list copy of database tag 'OraCopyBKUPonGCNV_level_0';

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
31      1    A 24-MAY-25       2812886    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

34      3    A 24-MAY-25       2813001    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

33      4    A 24-MAY-25       2813043    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

42      5    A 24-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

37      6    A 24-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

47      7    A 24-MAY-25       2813504    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

43      8    A 24-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

39      9    A 24-MAY-25       2813238    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

35      10   A 24-MAY-25       2813112    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

44      11   A 24-MAY-25       2813425    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

48      12   A 24-MAY-25       2813508    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

40      13   A 24-MAY-25       2813243    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

36      14   A 24-MAY-25       2813124    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

45      15   A 24-MAY-25       2813463    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

49      16   A 24-MAY-25       2813512    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

41      17   A 24-MAY-25       2813364    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

38      18   A 24-MAY-25       2813185    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

46      19   A 24-MAY-25       2813467    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

50      20   A 24-MAY-25       2813516    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

6       21   A 23-MAY-25       2768847    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

7       22   A 23-MAY-25       2768851    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

12      23   A 23-MAY-25       2777335    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

24      24   A 24-MAY-25       2803186    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

5       25   A 23-MAY-25       2768856    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

15      26   A 23-MAY-25       2777644    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

25      27   A 24-MAY-25       2803231    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

4       28   A 23-MAY-25       2768859    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

17      29   A 23-MAY-25       2781833    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

16      30   A 23-MAY-25       2781842    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

26      31   A 24-MAY-25       2803450    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

8       32   A 23-MAY-25       2773143    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

10      33   A 23-MAY-25       2773183    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

18      34   A 23-MAY-25       2781890    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

27      35   A 24-MAY-25       2803827    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

9       36   A 23-MAY-25       2773193    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

19      37   A 23-MAY-25       2782104    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

28      38   A 24-MAY-25       2808047    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

20      39   A 23-MAY-25       2786009    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

29      40   A 24-MAY-25       2808169    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

11      41   A 23-MAY-25       2773323    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

21      42   A 23-MAY-25       2786042    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

30      43   A 24-MAY-25       2808367    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

14      44   A 23-MAY-25       2777322    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

32      45   A 24-MAY-25       2808624    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

13      46   A 23-MAY-25       2777326    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

22      47   A 23-MAY-25       2786345    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

23      48   A 23-MAY-25       2786456    23-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

52      49   A 24-MAY-25       2812634    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

51      50   A 24-MAY-25       2812638    24-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3


RMAN>

....
. Oracle RMAN 명령 프롬프트에서 스키마를 보고하여 현재 VLDB 데이터 파일이 운영 스토리지에 있는지 확인합니다.
+
....

RMAN> report schema;

Report of database schema for database with db_unique_name NTAP

List of Permanent Datafiles
===========================
File Size(MB) Tablespace           RB segs Datafile Name
---- -------- -------------------- ------- ------------------------
1    1070     SYSTEM               YES     +DATA/NTAP/DATAFILE/system.257.1201727295
3    970      SYSAUX               NO      +DATA/NTAP/DATAFILE/sysaux.258.1201727339
4    680      UNDOTBS1             YES     +DATA/NTAP/DATAFILE/undotbs1.259.1201727365
5    400      PDB$SEED:SYSTEM      NO      +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
6    460      PDB$SEED:SYSAUX      NO      +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
7    5        USERS                NO      +DATA/NTAP/DATAFILE/users.260.1201727365
8    235      PDB$SEED:UNDOTBS1    NO      +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
9    410      NTAP_PDB1:SYSTEM     YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
10   510      NTAP_PDB1:SYSAUX     NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
11   240      NTAP_PDB1:UNDOTBS1   YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
12   5        NTAP_PDB1:USERS      NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
13   410      NTAP_PDB2:SYSTEM     YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
14   510      NTAP_PDB2:SYSAUX     NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
15   235      NTAP_PDB2:UNDOTBS1   YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
16   5        NTAP_PDB2:USERS      NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
17   410      NTAP_PDB3:SYSTEM     YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
18   510      NTAP_PDB3:SYSAUX     NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
19   235      NTAP_PDB3:UNDOTBS1   YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
20   5        NTAP_PDB3:USERS      NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
21   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
22   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
23   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
24   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
25   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
26   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
27   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
28   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
29   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
30   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
31   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
32   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
33   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
34   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
35   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
36   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
37   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
38   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
39   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
40   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
41   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
42   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
43   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
44   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
45   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
46   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
47   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
48   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
49   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
50   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477

List of Temporary Files
=======================
File Size(MB) Tablespace           Maxsize(MB) Tempfile Name
---- -------- -------------------- ----------- --------------------
1    123      TEMP                 32767       +DATA/NTAP/TEMPFILE/temp.265.1201727469
2    123      PDB$SEED:TEMP        32767       +DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
3    16384    NTAP_PDB1:TEMP       32767       +DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
4    30720    NTAP_PDB2:TEMP       32767       +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
5    30720    NTAP_PDB3:TEMP       32767       +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319

RMAN>



....
. OS NFS 마운트 지점에서 데이터베이스 이미지 복사본 검증
+
....
[oracle@orap ~]$ ls -l /nfsgcnv/oracopy/
total 954924748
-rw-r----- 1 oracle asm    11600384 May 27 16:25 bct_ntap.ctf
-rw-r----- 1 oracle asm 32212262912 May 23 17:29 data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
-rw-r----- 1 oracle asm 32212262912 May 23 17:32 data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
-rw-r----- 1 oracle asm 32212262912 May 23 17:28 data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
-rw-r----- 1 oracle asm 32212262912 May 23 17:27 data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
-rw-r----- 1 oracle asm 32212262912 May 23 18:49 data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
-rw-r----- 1 oracle asm 32212262912 May 23 18:49 data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
-rw-r----- 1 oracle asm 32212262912 May 23 18:49 data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
-rw-r----- 1 oracle asm 32212262912 May 23 18:56 data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
-rw-r----- 1 oracle asm 32212262912 May 23 20:11 data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
-rw-r----- 1 oracle asm 32212262912 May 23 20:10 data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
-rw-r----- 1 oracle asm 32212262912 May 23 20:10 data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
-rw-r----- 1 oracle asm 32212262912 May 23 20:16 data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
-rw-r----- 1 oracle asm 32212262912 May 23 21:32 data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
-rw-r----- 1 oracle asm 32212262912 May 23 21:31 data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
-rw-r----- 1 oracle asm 32212262912 May 23 21:36 data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
-rw-r----- 1 oracle asm 32212262912 May 23 21:39 data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
-rw-r----- 1 oracle asm 32212262912 May 23 22:52 data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
-rw-r----- 1 oracle asm 32212262912 May 23 22:53 data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
-rw-r----- 1 oracle asm 32212262912 May 23 22:58 data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
-rw-r----- 1 oracle asm 32212262912 May 23 23:01 data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
-rw-r----- 1 oracle asm 32212262912 May 24 00:13 data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
-rw-r----- 1 oracle asm 32212262912 May 24 00:16 data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
-rw-r----- 1 oracle asm 32212262912 May 24 00:20 data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
-rw-r----- 1 oracle asm 32212262912 May 24 00:23 data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
-rw-r----- 1 oracle asm 32212262912 May 24 01:36 data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
-rw-r----- 1 oracle asm 32212262912 May 24 01:36 data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
-rw-r----- 1 oracle asm 32212262912 May 24 01:41 data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
-rw-r----- 1 oracle asm 32212262912 May 24 01:45 data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
-rw-r----- 1 oracle asm 32212262912 May 24 02:26 data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
-rw-r----- 1 oracle asm 32212262912 May 24 02:25 data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
-rw-r----- 1 oracle asm   534781952 May 24 01:48 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
-rw-r----- 1 oracle asm   534781952 May 24 01:49 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
-rw-r----- 1 oracle asm   534781952 May 24 01:50 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
-rw-r----- 1 oracle asm   985669632 May 24 01:47 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
-rw-r----- 1 oracle asm   482353152 May 24 01:50 data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
-rw-r----- 1 oracle asm  1121984512 May 24 01:44 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
-rw-r----- 1 oracle asm   429924352 May 24 01:51 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
-rw-r----- 1 oracle asm   429924352 May 24 01:52 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
-rw-r----- 1 oracle asm   419438592 May 24 01:52 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
-rw-r----- 1 oracle asm   429924352 May 24 01:51 data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
-rw-r----- 1 oracle asm   251666432 May 24 01:53 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
-rw-r----- 1 oracle asm   246423552 May 24 01:54 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
-rw-r----- 1 oracle asm   246423552 May 24 01:54 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
-rw-r----- 1 oracle asm   713039872 May 24 01:47 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
-rw-r----- 1 oracle asm   246423552 May 24 01:53 data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
-rw-r----- 1 oracle asm     5251072 May 24 01:54 data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg

....
. crontab에서 원하는 간격으로 간단한 UNIX 쉘 스크립트로 RMAN 백업 스크립트를 실행합니다.
+
....

[oracle@orap ~]$ cat rman_bkup_merge.sh
#/usr/bin/sh

log=/home/oracle/logs/ora_bkup_merge_`date +"%Y-%m%d-%H%M%S"`.log

echo "Begin Oracle DB incremental backup/merge to copy at `date +"%Y-%m%d-%H%M%S"`" >> $log

export ORACLE_HOME=/u01/app/oracle/product/19.0.0/NTAP
export ORACLE_SID=NTAP
export PATH=$ORACLE_HOME/bin:$PATH

rman target / nocatalog <<EOF>> $log
@/home/oracle/rman_bkup_merge.cmd
EOF

echo "End Oracle DB incremental backup/merge to copy at `date +"%Y-%m%d-%H%M%S"`" >> $log

....


이것으로 GCNV 스토리지에서 서버 내 NFS 마운트로 Oracle VLDB 대기 이미지 사본 백업 및 병합 설정이 완료됩니다.

====


=== 백업 이미지 복사를 이용한 Oracle VLDB 빠른 복구



==== Oracle 데이터 파일의 손실 또는 손상으로 인한 완전한 복구

[%collapsible%open]
====
데이터 손실이나 손상 등 기본 저장소 문제로 인한 장애가 발생하는 경우, 데이터베이스는 GCNV NFS 마운트의 이미지 복사본으로 빠르게 전환되고 데이터베이스 복원 없이도 현재 상태로 복구될 수 있습니다. 미디어 복원을 제거하면 VLDB의 데이터베이스 복구 속도가 엄청나게 빨라집니다. 이 활용 사례에서는 Oracle VDB DB 서버가 손상되지 않고 데이터베이스 제어 파일, 아카이브 로그 및 현재 로그를 모두 복구에 사용할 수 있다고 가정합니다.

. Oracle 사용자로 기본 VLDB 서버 호스트에 로그인하고 전환하기 전에 테스트 테이블을 만듭니다.
+
....

[oracle@orap ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Tue May 27 17:31:23 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> create table test(id integer, dt timestamp, event varchar(100));

Table created.

....
. 테스트 테이블에 행을 삽입합니다. 행은 최근 증분 백업 및 병합 이후에 삽입되었으며, 해당 데이터는 백업 세트에 없습니다. 이후 데모에서는 데이터베이스가 완전히 복구된 후 테스트 행이 복구되는 것을 보여줍니다.
+
....

SQL> insert into test values (1, sysdate, 'validate a full recovery after a switch to DB backup copy on GCNV');

1 row created.

SQL> commit;

Commit complete.


....
. 데이터베이스를 종료하여 실패를 시뮬레이션합니다.
+
....

SQL> alter session set container=cdb$root;

Session altered.

SQL> shutdown immediate;
Database closed.
Database dismounted.
ORACLE instance shut down.

....
. Oracle 사용자로서 RMAN을 통해 Oracle 데이터베이스에 연결하여 데이터베이스를 복사합니다.
+
....

[oracle@orap ~]$ rman target / nocatalog;

Recovery Manager: Release 19.0.0.0.0 - Production on Tue May 27 17:40:59 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database (not started)

RMAN> startup mount;

Oracle instance started
database mounted

Total System Global Area    5620363744 bytes

Fixed Size                     9175520 bytes
Variable Size               1023410176 bytes
Database Buffers            4580179968 bytes
Redo Buffers                   7598080 bytes

RMAN> switch database to copy;

datafile 1 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2"
datafile 3 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5"
datafile 4 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa"
datafile 5 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a"
datafile 6 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e"
datafile 7 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg"
datafile 8 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82"
datafile 9 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35"
datafile 10 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu"
datafile 11 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80"
datafile 12 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh"
datafile 13 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d"
datafile 14 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp"
datafile 15 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p"
datafile 16 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi"
datafile 17 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56"
datafile 18 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e"
datafile 19 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p"
datafile 20 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi"
datafile 21 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm"
datafile 22 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm"
datafile 23 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr"
datafile 24 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8"
datafile 25 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn"
datafile 26 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7"
datafile 27 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk"
datafile 28 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn"
datafile 29 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h"
datafile 30 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b"
datafile 31 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p"
datafile 32 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl"
datafile 33 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf"
datafile 34 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o"
datafile 35 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m"
datafile 36 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9"
datafile 37 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu"
datafile 38 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7"
datafile 39 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th"
datafile 40 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did"
datafile 41 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd"
datafile 42 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv"
datafile 43 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp"
datafile 44 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc"
datafile 45 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17"
datafile 46 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc"
datafile 47 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i"
datafile 48 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd"
datafile 49 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95"
datafile 50 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95"


....
. 복구 및 오픈 데이터베이스를 통해 마지막 증분 백업에서 최신 상태로 복원합니다.
+
....
RMAN> recover database;

Starting recover at 27-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=139 device type=DISK
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00012: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
destination for restore of datafile 00028: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
destination for restore of datafile 00041: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
destination for restore of datafile 00044: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/213qh3m5_65_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/213qh3m5_65_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00011: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
destination for restore of datafile 00025: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
destination for restore of datafile 00036: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
destination for restore of datafile 00046: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/1u3qh3m5_62_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/1u3qh3m5_62_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00015: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
destination for restore of datafile 00029: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
destination for restore of datafile 00039: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
destination for restore of datafile 00048: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/1v3qh3m5_63_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/1v3qh3m5_63_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00019: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
destination for restore of datafile 00031: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
destination for restore of datafile 00043: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
destination for restore of datafile 00050: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/203qh3m5_64_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/203qh3m5_64_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00010: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
destination for restore of datafile 00021: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
destination for restore of datafile 00032: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/243qh3m7_68_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/243qh3m7_68_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00016: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
destination for restore of datafile 00030: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
destination for restore of datafile 00042: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
destination for restore of datafile 00047: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/223qh3m6_66_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/223qh3m6_66_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00020: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
destination for restore of datafile 00035: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
destination for restore of datafile 00045: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
destination for restore of datafile 00049: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/233qh3m7_67_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/233qh3m7_67_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00009: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
destination for restore of datafile 00022: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
destination for restore of datafile 00033: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/273qh3m7_71_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/273qh3m7_71_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00013: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
destination for restore of datafile 00026: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
destination for restore of datafile 00037: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/283qh3m7_72_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/283qh3m7_72_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00014: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
destination for restore of datafile 00023: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
destination for restore of datafile 00034: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/253qh3m7_69_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/253qh3m7_69_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00018: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
destination for restore of datafile 00024: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
destination for restore of datafile 00038: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/263qh3m7_70_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/263qh3m7_70_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:02
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00001: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2a3qh3m9_74_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2a3qh3m9_74_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00017: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
destination for restore of datafile 00027: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
destination for restore of datafile 00040: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/293qh3m9_73_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/293qh3m9_73_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00007: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2g3qh3ma_80_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2g3qh3ma_80_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00004: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2c3qh3m9_76_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2c3qh3m9_76_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:03
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00003: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/2b3qh3m9_75_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/2b3qh3m9_75_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:07

starting media recovery
media recovery complete, elapsed time: 00:00:04

Finished recover at 27-MAY-25

RMAN> alter database open;

Statement processed

RMAN>


....
. 복구 후 sqlplus에서 데이터베이스 구조를 확인하여 제어, 임시 및 현재 로그 파일을 제외한 모든 VLDB 데이터 파일이 GCNV NFS 파일 시스템에서 복제본으로 전환되는지 확인합니다.
+
....

[oracle@orap ~]$ sqlplus / as sysdba;

SQL*Plus: Release 19.0.0.0.0 - Production on Tue May 27 17:45:04 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> show pdbs;

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 NTAP_PDB1                      READ WRITE NO
         4 NTAP_PDB2                      READ WRITE NO
         5 NTAP_PDB3                      READ WRITE NO
SQL> select name from v$datafile
  2  union
  3  select name from v$tempfile
  4  union
  5  select name from v$controlfile
  6  union
  7  select member from v$logfile;

NAME
--------------------------------------------------------------------------------
+DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
+DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319
+DATA/NTAP/CONTROLFILE/current.261.1201727423
+DATA/NTAP/ONLINELOG/group_1.262.1201727425
+DATA/NTAP/ONLINELOG/group_2.263.1201727425
+DATA/NTAP/ONLINELOG/group_3.264.1201727425
+DATA/NTAP/TEMPFILE/temp.265.1201727469
+LOGS/NTAP/CONTROLFILE/current.256.1201727423
+LOGS/NTAP/ONLINELOG/group_1.258.1201727433

NAME
--------------------------------------------------------------------------------
+LOGS/NTAP/ONLINELOG/group_2.257.1201727431
+LOGS/NTAP/ONLINELOG/group_3.259.1201727433
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg

62 rows selected.


....
. SQL plus에서 마지막 증분 백업 후 이미지 백업 복사본으로 전환하기 전에 비활성화한 테스트 행이 복구되었는지 검증합니다.
+
....

SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV


SQL>

....


====


==== 백업 사본에서 Oracle VLDB를 기본 저장소로 되돌립니다.

[%collapsible%open]
====
기본 스토리지의 스토리지 장애가 해결되면 최소한의 다운타임으로 데이터베이스를 기본 스토리지로 쉽게 되돌릴 수 있습니다. 다음은 단계별 절차입니다.

. RMAN에서 DB 스키마가 현재 GCNV 백업 저장소에 있는지 확인합니다.
+
....

RMAN> report schema;

Report of database schema for database with db_unique_name NTAP

List of Permanent Datafiles
===========================
File Size(MB) Tablespace           RB segs Datafile Name
---- -------- -------------------- ------- ------------------------
1    1070     SYSTEM               YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
3    970      SYSAUX               NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
4    680      UNDOTBS1             YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
5    400      PDB$SEED:SYSTEM      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
6    460      PDB$SEED:SYSAUX      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
7    5        USERS                NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
8    235      PDB$SEED:UNDOTBS1    NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
9    410      NTAP_PDB1:SYSTEM     YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
10   510      NTAP_PDB1:SYSAUX     NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
11   240      NTAP_PDB1:UNDOTBS1   YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
12   5        NTAP_PDB1:USERS      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
13   410      NTAP_PDB2:SYSTEM     YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
14   510      NTAP_PDB2:SYSAUX     NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
15   235      NTAP_PDB2:UNDOTBS1   YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
16   5        NTAP_PDB2:USERS      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
17   410      NTAP_PDB3:SYSTEM     YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
18   510      NTAP_PDB3:SYSAUX     NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
19   235      NTAP_PDB3:UNDOTBS1   YES     /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
20   5        NTAP_PDB3:USERS      NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
21   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
22   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
23   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
24   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
25   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
26   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
27   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
28   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
29   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
30   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
31   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
32   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
33   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
34   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
35   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
36   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
37   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
38   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
39   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
40   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
41   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
42   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
43   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
44   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
45   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
46   30720    NTAP_PDB1:SOE1       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
47   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
48   30720    NTAP_PDB2:SOE2       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
49   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
50   30720    NTAP_PDB3:SOE3       NO      /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95

List of Temporary Files
=======================
File Size(MB) Tablespace           Maxsize(MB) Tempfile Name
---- -------- -------------------- ----------- --------------------
1    123      TEMP                 32767       +DATA/NTAP/TEMPFILE/temp.265.1201727469
2    123      PDB$SEED:TEMP        32767       +DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
3    16384    NTAP_PDB1:TEMP       32767       +DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
4    30720    NTAP_PDB2:TEMP       32767       +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
5    30720    NTAP_PDB3:TEMP       32767       +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319

....
. 기본 데이터베이스가 이미지 복사본으로 전환되면 기본 데이터베이스는 이제 RMAN 레코드의 복사본이 됩니다.
+
....

RMAN> list copy of database;

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
53      1    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/system.257.1201727295

54      3    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/sysaux.258.1201727339

55      4    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/undotbs1.259.1201727365

56      5    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
        Container ID: 2, PDB Name: PDB$SEED

57      6    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
        Container ID: 2, PDB Name: PDB$SEED

58      7    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/users.260.1201727365

59      8    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
        Container ID: 2, PDB Name: PDB$SEED

60      9    A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

61      10   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

62      11   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

63      12   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
        Container ID: 3, PDB Name: NTAP_PDB1

64      13   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

65      14   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

66      15   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

67      16   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
        Container ID: 4, PDB Name: NTAP_PDB2

68      17   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

69      18   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

70      19   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

71      20   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
        Container ID: 5, PDB Name: NTAP_PDB3

72      21   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
        Container ID: 3, PDB Name: NTAP_PDB1

73      22   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
        Container ID: 3, PDB Name: NTAP_PDB1

74      23   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
        Container ID: 4, PDB Name: NTAP_PDB2

75      24   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
        Container ID: 5, PDB Name: NTAP_PDB3

76      25   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
        Container ID: 3, PDB Name: NTAP_PDB1

77      26   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
        Container ID: 4, PDB Name: NTAP_PDB2

78      27   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
        Container ID: 5, PDB Name: NTAP_PDB3

79      28   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
        Container ID: 3, PDB Name: NTAP_PDB1

80      29   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
        Container ID: 4, PDB Name: NTAP_PDB2

81      30   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
        Container ID: 4, PDB Name: NTAP_PDB2

82      31   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
        Container ID: 5, PDB Name: NTAP_PDB3

83      32   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
        Container ID: 3, PDB Name: NTAP_PDB1

84      33   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
        Container ID: 3, PDB Name: NTAP_PDB1

85      34   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
        Container ID: 4, PDB Name: NTAP_PDB2

86      35   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
        Container ID: 5, PDB Name: NTAP_PDB3

87      36   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
        Container ID: 3, PDB Name: NTAP_PDB1

88      37   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
        Container ID: 4, PDB Name: NTAP_PDB2

89      38   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
        Container ID: 5, PDB Name: NTAP_PDB3

90      39   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
        Container ID: 4, PDB Name: NTAP_PDB2

91      40   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
        Container ID: 5, PDB Name: NTAP_PDB3

92      41   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
        Container ID: 3, PDB Name: NTAP_PDB1

93      42   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
        Container ID: 4, PDB Name: NTAP_PDB2

94      43   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
        Container ID: 5, PDB Name: NTAP_PDB3

95      44   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
        Container ID: 3, PDB Name: NTAP_PDB1

96      45   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
        Container ID: 5, PDB Name: NTAP_PDB3

97      46   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
        Container ID: 3, PDB Name: NTAP_PDB1

98      47   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
        Container ID: 4, PDB Name: NTAP_PDB2

99      48   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
        Container ID: 4, PDB Name: NTAP_PDB2

100     49   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
        Container ID: 5, PDB Name: NTAP_PDB3

101     50   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477
        Container ID: 5, PDB Name: NTAP_PDB3


....
. 기본 저장소에 더 이상 사용되지 않는 데이터 파일이 있으면 제거하여 공간을 확보하고/또는 레코드를 지웁니다.
+
....

RMAN> delete copy of database;

allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=137 device type=DISK
List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
53      1    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/system.257.1201727295

54      3    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/sysaux.258.1201727339

55      4    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/undotbs1.259.1201727365

56      5    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307
        Container ID: 2, PDB Name: PDB$SEED

57      6    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307
        Container ID: 2, PDB Name: PDB$SEED

58      7    A 27-MAY-25       2901679    27-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/users.260.1201727365

59      8    A 27-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307
        Container ID: 2, PDB Name: PDB$SEED

60      9    A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

61      10   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

62      11   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255
        Container ID: 3, PDB Name: NTAP_PDB1

63      12   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277
        Container ID: 3, PDB Name: NTAP_PDB1

64      13   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

65      14   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

66      15   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279
        Container ID: 4, PDB Name: NTAP_PDB2

67      16   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301
        Container ID: 4, PDB Name: NTAP_PDB2

68      17   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

69      18   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

70      19   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301
        Container ID: 5, PDB Name: NTAP_PDB3

71      20   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323
        Container ID: 5, PDB Name: NTAP_PDB3

72      21   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019
        Container ID: 3, PDB Name: NTAP_PDB1

73      22   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419
        Container ID: 3, PDB Name: NTAP_PDB1

74      23   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535
        Container ID: 4, PDB Name: NTAP_PDB2

75      24   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665
        Container ID: 5, PDB Name: NTAP_PDB3

76      25   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401
        Container ID: 3, PDB Name: NTAP_PDB1

77      26   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153
        Container ID: 4, PDB Name: NTAP_PDB2

78      27   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207
        Container ID: 5, PDB Name: NTAP_PDB3

79      28   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271
        Container ID: 3, PDB Name: NTAP_PDB1

80      29   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261
        Container ID: 4, PDB Name: NTAP_PDB2

81      30   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317
        Container ID: 4, PDB Name: NTAP_PDB2

82      31   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343
        Container ID: 5, PDB Name: NTAP_PDB3

83      32   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351
        Container ID: 3, PDB Name: NTAP_PDB1

84      33   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805
        Container ID: 3, PDB Name: NTAP_PDB1

85      34   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829
        Container ID: 4, PDB Name: NTAP_PDB2

86      35   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821
        Container ID: 5, PDB Name: NTAP_PDB3

87      36   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969
        Container ID: 3, PDB Name: NTAP_PDB1

88      37   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025
        Container ID: 4, PDB Name: NTAP_PDB2

89      38   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375
        Container ID: 5, PDB Name: NTAP_PDB3

90      39   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375
        Container ID: 4, PDB Name: NTAP_PDB2

91      40   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381
        Container ID: 5, PDB Name: NTAP_PDB3

92      41   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399
        Container ID: 3, PDB Name: NTAP_PDB1

93      42   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601
        Container ID: 4, PDB Name: NTAP_PDB2

94      43   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629
        Container ID: 5, PDB Name: NTAP_PDB3

95      44   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651
        Container ID: 3, PDB Name: NTAP_PDB1

96      45   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031
        Container ID: 5, PDB Name: NTAP_PDB3

97      46   A 27-MAY-25       2901354    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095
        Container ID: 3, PDB Name: NTAP_PDB1

98      47   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051
        Container ID: 4, PDB Name: NTAP_PDB2

99      48   A 27-MAY-25       2901510    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549
        Container ID: 4, PDB Name: NTAP_PDB2

100     49   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563
        Container ID: 5, PDB Name: NTAP_PDB3

101     50   A 27-MAY-25       2901509    27-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477
        Container ID: 5, PDB Name: NTAP_PDB3


Do you really want to delete the above objects (enter YES or NO)? YES
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/system.257.1201727295 RECID=53 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/sysaux.258.1201727339 RECID=54 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/undotbs1.259.1201727365 RECID=55 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/system.266.1201728307 RECID=56 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/sysaux.267.1201728307 RECID=57 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/DATAFILE/users.260.1201727365 RECID=58 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/86B637B62FE07A65E053F706E80A27CA/DATAFILE/undotbs1.268.1201728307 RECID=59 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.272.1201729255 RECID=60 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.273.1201729255 RECID=61 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.271.1201729255 RECID=62 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.275.1201729277 RECID=63 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.277.1201729279 RECID=64 STAMP=1202233336
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.278.1201729279 RECID=65 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.276.1201729279 RECID=66 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.280.1201729301 RECID=67 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.282.1201729301 RECID=68 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.283.1201729301 RECID=69 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.281.1201729301 RECID=70 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.285.1201729323 RECID=71 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.286.1201793019 RECID=72 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.287.1201793419 RECID=73 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.288.1201793535 RECID=74 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1201793665 RECID=75 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.290.1201794401 RECID=76 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.291.1201795153 RECID=77 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1201795207 RECID=78 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.293.1201795271 RECID=79 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.294.1201796261 RECID=80 STAMP=1202233337
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.295.1201797317 RECID=81 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.296.1201797343 RECID=82 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.297.1201797351 RECID=83 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.298.1201800805 RECID=84 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1201800829 RECID=85 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.299.1201800821 RECID=86 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.301.1201801969 RECID=87 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1201802025 RECID=88 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.303.1201802375 RECID=89 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1201803375 RECID=90 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.305.1201803381 RECID=91 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1201803399 RECID=92 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.307.1201804601 RECID=93 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.308.1201804629 RECID=94 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1201804651 RECID=95 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.310.1201806031 RECID=96 STAMP=1202233338
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1201806095 RECID=97 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.311.1201806051 RECID=98 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.313.1201873549 RECID=99 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.314.1201873563 RECID=100 STAMP=1202233339
deleted datafile copy
datafile copy file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.315.1201875477 RECID=101 STAMP=1202233339
Deleted 49 objects


RMAN> list copy of database;

specification does not match any datafile copy in the repository

....
. RMAN 백업 및 병합 스크립트를 수정하여 기본 스토리지를 가리키도록 하고, 테스트 사례에서는 RMAN 채널 정의의 ASM 디스크 그룹 +DATA를 가리키도록 합니다. 수정된 백업 스크립트를 실행하여 기본 스토리지에 새 이미지 복사본을 생성합니다.
+
....

RMAN> @/home/oracle/rman_bkup_merge.cmd.1

RMAN> RUN
2> {
3>   allocate channel c1 device type disk format '+DATA';
4>   allocate channel c2 device type disk format '+DATA';
5>   allocate channel c3 device type disk format '+DATA';
6>   allocate channel c4 device type disk format '+DATA';
7>   delete obsolete;
8>   sql 'alter system archive log current';
9>   recover copy of database with tag 'OraCopyBKUPonGCNV_level_0';
10>   backup incremental level 1 copies=1 for recover of copy with tag 'OraCopyBKUPonGCNV_level_0' database;
11> }
released channel: ORA_DISK_1
allocated channel: c1
channel c1: SID=137 device type=DISK

allocated channel: c2
channel c2: SID=397 device type=DISK

allocated channel: c3
channel c3: SID=390 device type=DISK

allocated channel: c4
channel c4: SID=274 device type=DISK

RMAN retention policy will be applied to the command
RMAN retention policy is set to redundancy 1
Deleting the following obsolete backups and copies:
Type                 Key    Completion Time    Filename/Handle
-------------------- ------ ------------------ --------------------
Backup Set           12     24-MAY-25
  Backup Piece       12     24-MAY-25          /nfsgcnv/archlog/NTAP/autobackup/2025_05_24/o1_mf_s_1201919173_n32cl775_.bkp
deleted backup piece
backup piece handle=/nfsgcnv/archlog/NTAP/autobackup/2025_05_24/o1_mf_s_1201919173_n32cl775_.bkp RECID=12 STAMP=1201919175
Deleted 1 objects


sql statement: alter system archive log current

Starting recover at 27-MAY-25
no copy of datafile 1 found to recover
no copy of datafile 3 found to recover
no copy of datafile 4 found to recover
no copy of datafile 5 found to recover
no copy of datafile 6 found to recover
no copy of datafile 7 found to recover
no copy of datafile 8 found to recover
no copy of datafile 9 found to recover
no copy of datafile 10 found to recover
no copy of datafile 11 found to recover
no copy of datafile 12 found to recover
no copy of datafile 13 found to recover
no copy of datafile 14 found to recover
no copy of datafile 15 found to recover
no copy of datafile 16 found to recover
no copy of datafile 17 found to recover
no copy of datafile 18 found to recover
no copy of datafile 19 found to recover
no copy of datafile 20 found to recover
no copy of datafile 21 found to recover
no copy of datafile 22 found to recover
no copy of datafile 23 found to recover
no copy of datafile 24 found to recover
no copy of datafile 25 found to recover
no copy of datafile 26 found to recover
no copy of datafile 27 found to recover
no copy of datafile 28 found to recover
no copy of datafile 29 found to recover
no copy of datafile 30 found to recover
no copy of datafile 31 found to recover
no copy of datafile 32 found to recover
no copy of datafile 33 found to recover
no copy of datafile 34 found to recover
no copy of datafile 35 found to recover
no copy of datafile 36 found to recover
no copy of datafile 37 found to recover
no copy of datafile 38 found to recover
no copy of datafile 39 found to recover
no copy of datafile 40 found to recover
no copy of datafile 41 found to recover
no copy of datafile 42 found to recover
no copy of datafile 43 found to recover
no copy of datafile 44 found to recover
no copy of datafile 45 found to recover
no copy of datafile 46 found to recover
no copy of datafile 47 found to recover
no copy of datafile 48 found to recover
no copy of datafile 49 found to recover
no copy of datafile 50 found to recover
Finished recover at 27-MAY-25

Starting backup at 27-MAY-25
no parent backup or copy of datafile 1 found
no parent backup or copy of datafile 3 found
no parent backup or copy of datafile 4 found
no parent backup or copy of datafile 7 found
no parent backup or copy of datafile 6 found
no parent backup or copy of datafile 5 found
no parent backup or copy of datafile 8 found
no parent backup or copy of datafile 21 found
no parent backup or copy of datafile 22 found
no parent backup or copy of datafile 25 found
no parent backup or copy of datafile 28 found
no parent backup or copy of datafile 32 found
no parent backup or copy of datafile 33 found
no parent backup or copy of datafile 36 found
no parent backup or copy of datafile 41 found
no parent backup or copy of datafile 44 found
no parent backup or copy of datafile 46 found
no parent backup or copy of datafile 10 found
no parent backup or copy of datafile 9 found
no parent backup or copy of datafile 11 found
no parent backup or copy of datafile 12 found
no parent backup or copy of datafile 23 found
no parent backup or copy of datafile 26 found
no parent backup or copy of datafile 29 found
no parent backup or copy of datafile 30 found
no parent backup or copy of datafile 34 found
no parent backup or copy of datafile 37 found
no parent backup or copy of datafile 39 found
no parent backup or copy of datafile 42 found
no parent backup or copy of datafile 47 found
no parent backup or copy of datafile 48 found
no parent backup or copy of datafile 14 found
no parent backup or copy of datafile 13 found
no parent backup or copy of datafile 15 found
no parent backup or copy of datafile 16 found
no parent backup or copy of datafile 24 found
no parent backup or copy of datafile 27 found
no parent backup or copy of datafile 31 found
no parent backup or copy of datafile 35 found
no parent backup or copy of datafile 38 found
no parent backup or copy of datafile 40 found
no parent backup or copy of datafile 43 found
no parent backup or copy of datafile 45 found
no parent backup or copy of datafile 49 found
no parent backup or copy of datafile 50 found
no parent backup or copy of datafile 18 found
no parent backup or copy of datafile 17 found
no parent backup or copy of datafile 19 found
no parent backup or copy of datafile 20 found
channel c1: starting datafile copy
input datafile file number=00021 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_0c3q6gvm
channel c2: starting datafile copy
input datafile file number=00022 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_0d3q6gvm
channel c3: starting datafile copy
input datafile file number=00025 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_0e3q6gvn
channel c4: starting datafile copy
input datafile file number=00028 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_0f3q6gvn
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=148 STAMP=1202243608
channel c2: datafile copy complete, elapsed time: 01:03:56
channel c2: starting datafile copy
input datafile file number=00032 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_0g3q6lkl
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=149 STAMP=1202243617
channel c3: datafile copy complete, elapsed time: 01:03:60
channel c3: starting datafile copy
input datafile file number=00033 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_0h3q6lmf
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=150 STAMP=1202243621
channel c1: datafile copy complete, elapsed time: 01:04:03
channel c1: starting datafile copy
input datafile file number=00036 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_0i3q6ln9
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=151 STAMP=1202243625
channel c4: datafile copy complete, elapsed time: 01:04:11
channel c4: starting datafile copy
input datafile file number=00041 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_0j3q6ltd
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=153 STAMP=1202247449
channel c2: datafile copy complete, elapsed time: 01:03:60
channel c2: starting datafile copy
input datafile file number=00044 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_0k3q6qdc
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=152 STAMP=1202247446
channel c3: datafile copy complete, elapsed time: 01:03:57
channel c3: starting datafile copy
input datafile file number=00046 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_0l3q6qdc
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=154 STAMP=1202247463
channel c4: datafile copy complete, elapsed time: 01:04:02
channel c4: starting datafile copy
input datafile file number=00023 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_0m3q6qdr
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=155 STAMP=1202247473
channel c1: datafile copy complete, elapsed time: 01:04:12
channel c1: starting datafile copy
input datafile file number=00026 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_0n3q6qq7
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=156 STAMP=1202251305
channel c2: datafile copy complete, elapsed time: 01:04:15
channel c2: starting datafile copy
input datafile file number=00029 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_0o3q6v5h
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=157 STAMP=1202251305
channel c3: datafile copy complete, elapsed time: 01:04:15
channel c3: starting datafile copy
input datafile file number=00030 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_0p3q6v6b
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=158 STAMP=1202251311
channel c4: datafile copy complete, elapsed time: 01:04:01
channel c4: starting datafile copy
input datafile file number=00034 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_0q3q6v7o
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=159 STAMP=1202251313
channel c1: datafile copy complete, elapsed time: 01:03:59
channel c1: starting datafile copy
input datafile file number=00037 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_0r3q6vhu
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=160 STAMP=1202255139
channel c3: datafile copy complete, elapsed time: 01:03:48
channel c3: starting datafile copy
input datafile file number=00039 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_0s3q73th
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=161 STAMP=1202255150
channel c2: datafile copy complete, elapsed time: 01:04:04
channel c2: starting datafile copy
input datafile file number=00042 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_0t3q73uv
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=162 STAMP=1202255155
channel c4: datafile copy complete, elapsed time: 01:04:03
channel c4: starting datafile copy
input datafile file number=00047 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_0u3q747i
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=163 STAMP=1202255166
channel c1: datafile copy complete, elapsed time: 01:04:17
channel c1: starting datafile copy
input datafile file number=00048 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_0v3q74cd
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=164 STAMP=1202258984
channel c2: datafile copy complete, elapsed time: 01:03:51
channel c2: starting datafile copy
input datafile file number=00024 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_103q78l8
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=165 STAMP=1202258992
channel c4: datafile copy complete, elapsed time: 01:03:59
channel c4: starting datafile copy
input datafile file number=00027 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_113q78nk
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=166 STAMP=1202259002
channel c1: datafile copy complete, elapsed time: 01:03:59
channel c1: starting datafile copy
input datafile file number=00031 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_123q791p
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=167 STAMP=1202259003
channel c3: datafile copy complete, elapsed time: 01:04:30
channel c3: starting datafile copy
input datafile file number=00035 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_133q795m
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=168 STAMP=1202262811
channel c2: datafile copy complete, elapsed time: 01:03:49
channel c2: starting datafile copy
input datafile file number=00038 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_143q7dd7
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=169 STAMP=1202262817
channel c4: datafile copy complete, elapsed time: 01:03:43
channel c4: starting datafile copy
input datafile file number=00040 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_153q7did
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=170 STAMP=1202262857
channel c3: datafile copy complete, elapsed time: 01:04:13
channel c3: starting datafile copy
input datafile file number=00043 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_163q7dqp
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=171 STAMP=1202262866
channel c1: datafile copy complete, elapsed time: 01:04:16
channel c1: starting datafile copy
input datafile file number=00045 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_173q7e17
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=172 STAMP=1202266648
channel c2: datafile copy complete, elapsed time: 01:03:56
channel c2: starting datafile copy
input datafile file number=00049 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_183q7i95
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=173 STAMP=1202266665
channel c4: datafile copy complete, elapsed time: 01:04:10
channel c4: starting datafile copy
input datafile file number=00050 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_193q7i95
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=174 STAMP=1202266695
channel c1: datafile copy complete, elapsed time: 01:03:56
channel c1: starting datafile copy
input datafile file number=00001 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_1a3q7ii2
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=175 STAMP=1202266710
channel c3: datafile copy complete, elapsed time: 01:04:08
channel c3: starting datafile copy
input datafile file number=00003 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_1b3q7io5
output file name=+DATA/NTAP/DATAFILE/sysaux.281.1202266713 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=176 STAMP=1202266836
channel c3: datafile copy complete, elapsed time: 00:02:06
channel c3: starting datafile copy
input datafile file number=00004 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_1c3q7ipa
output file name=+DATA/NTAP/DATAFILE/system.285.1202266707 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=177 STAMP=1202266837
channel c1: datafile copy complete, elapsed time: 00:02:14
channel c1: starting datafile copy
input datafile file number=00010 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_1d3q7isu
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=178 STAMP=1202266904
channel c1: datafile copy complete, elapsed time: 00:01:15
channel c1: starting datafile copy
input datafile file number=00014 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_1e3q7itp
output file name=+DATA/NTAP/DATAFILE/undotbs1.283.1202266839 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=179 STAMP=1202266919
channel c3: datafile copy complete, elapsed time: 00:01:24
channel c3: starting datafile copy
input datafile file number=00018 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_1f3q7j0e
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=180 STAMP=1202266976
channel c1: datafile copy complete, elapsed time: 00:01:03
channel c1: starting datafile copy
input datafile file number=00006 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_1g3q7j0e
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=181 STAMP=1202266987
channel c3: datafile copy complete, elapsed time: 00:01:10
channel c3: starting datafile copy
input datafile file number=00009 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_1h3q7j35
output file name=+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=182 STAMP=1202267033
channel c1: datafile copy complete, elapsed time: 00:01:00
channel c1: starting datafile copy
input datafile file number=00013 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_1i3q7j3d
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=183 STAMP=1202267043
channel c3: datafile copy complete, elapsed time: 00:00:53
channel c3: starting datafile copy
input datafile file number=00017 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_1j3q7j56
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=184 STAMP=1202267089
channel c1: datafile copy complete, elapsed time: 00:00:53
channel c1: starting datafile copy
input datafile file number=00005 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_1k3q7j5a
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=185 STAMP=1202267099
channel c3: datafile copy complete, elapsed time: 00:01:00
channel c3: starting datafile copy
input datafile file number=00011 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_1l3q7j80
output file name=+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=186 STAMP=1202267137
channel c1: datafile copy complete, elapsed time: 00:00:51
channel c1: starting datafile copy
input datafile file number=00008 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_1m3q7j82
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=187 STAMP=1202267138
channel c3: datafile copy complete, elapsed time: 00:00:35
channel c3: starting datafile copy
input datafile file number=00015 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_1n3q7j9p
output file name=+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=188 STAMP=1202267172
channel c1: datafile copy complete, elapsed time: 00:00:36
channel c1: starting datafile copy
input datafile file number=00019 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_1o3q7j9p
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=189 STAMP=1202267172
channel c3: datafile copy complete, elapsed time: 00:00:35
channel c3: starting datafile copy
input datafile file number=00007 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_1p3q7jbg
output file name=+DATA/NTAP/DATAFILE/users.266.1202267179 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=190 STAMP=1202267179
channel c3: datafile copy complete, elapsed time: 00:00:01
channel c3: starting datafile copy
input datafile file number=00012 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_1q3q7jbh
output file name=+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=191 STAMP=1202267182
channel c3: datafile copy complete, elapsed time: 00:00:03
channel c3: starting datafile copy
input datafile file number=00016 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_1r3q7jbi
output file name=+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=192 STAMP=1202267185
channel c3: datafile copy complete, elapsed time: 00:00:03
channel c3: starting datafile copy
input datafile file number=00020 name=/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_1s3q7jbi
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=193 STAMP=1202267190
channel c3: datafile copy complete, elapsed time: 00:00:03
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=194 STAMP=1202267199
channel c1: datafile copy complete, elapsed time: 00:00:24
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=195 STAMP=1202268827
channel c2: datafile copy complete, elapsed time: 00:36:19
output file name=+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669 tag=ORACOPYBKUPONGCNV_LEVEL_0 RECID=196 STAMP=1202268833
channel c4: datafile copy complete, elapsed time: 00:36:14
Finished backup at 28-MAY-25

Starting Control File and SPFILE Autobackup at 28-MAY-25
piece handle=/nfsgcnv/archlog/NTAP/autobackup/2025_05_28/o1_mf_s_1202268842_n3f11d04_.bkp comment=NONE
Finished Control File and SPFILE Autobackup at 28-MAY-25
released channel: c1
released channel: c2
released channel: c3
released channel: c4

RMAN> **end-of-file**

RMAN>

....
. 기본 저장소에 새로운 VLDB 이미지 복사본이 생성되었는지 확인합니다.
+
....

RMAN> list copy of database;

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
177     1    A 28-MAY-25       2951405    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/system.285.1202266707
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

176     3    A 28-MAY-25       2951427    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/sysaux.281.1202266713
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

179     4    A 28-MAY-25       2951801    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/undotbs1.283.1202266839
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

186     5    A 28-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

182     6    A 28-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

190     7    A 28-MAY-25       2952103    28-MAY-25       NO
        Name: +DATA/NTAP/DATAFILE/users.266.1202267179
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

188     8    A 28-MAY-25       2377077    21-MAY-25       NO
        Name: +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

183     9    A 28-MAY-25       2951919    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

178     10   A 28-MAY-25       2951806    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

187     11   A 28-MAY-25       2952000    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

191     12   A 28-MAY-25       2952108    28-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

184     13   A 28-MAY-25       2951954    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

180     14   A 28-MAY-25       2951863    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

189     15   A 28-MAY-25       2952084    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

192     16   A 28-MAY-25       2952113    28-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

185     17   A 28-MAY-25       2951961    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

181     18   A 28-MAY-25       2951870    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

194     19   A 28-MAY-25       2952099    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

193     20   A 28-MAY-25       2952119    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

150     21   A 27-MAY-25       2912326    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

148     22   A 27-MAY-25       2912334    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

158     23   A 27-MAY-25       2919519    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

168     24   A 28-MAY-25       2943784    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

149     25   A 27-MAY-25       2912330    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

159     26   A 27-MAY-25       2919524    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

169     27   A 28-MAY-25       2943790    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

151     28   A 27-MAY-25       2912331    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

161     29   A 27-MAY-25       2936579    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

160     30   A 27-MAY-25       2936583    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

171     31   A 28-MAY-25       2943799    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

153     32   A 27-MAY-25       2915938    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

152     33   A 27-MAY-25       2915943    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

162     34   A 27-MAY-25       2936588    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

170     35   A 28-MAY-25       2943803    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

155     36   A 27-MAY-25       2915949    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

163     37   A 27-MAY-25       2936592    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

172     38   A 28-MAY-25       2947486    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

167     39   A 28-MAY-25       2940255    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

173     40   A 28-MAY-25       2947490    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

154     41   A 27-MAY-25       2915970    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

164     42   A 28-MAY-25       2940264    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

175     43   A 28-MAY-25       2947509    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

156     44   A 27-MAY-25       2919491    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

174     45   A 28-MAY-25       2947515    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

157     46   A 27-MAY-25       2919495    27-MAY-25       NO
        Name: +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

165     47   A 28-MAY-25       2940268    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

166     48   A 28-MAY-25       2940277    27-MAY-25       NO
        Name: +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

195     49   A 28-MAY-25       2951380    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

196     50   A 28-MAY-25       2951389    28-MAY-25       NO
        Name: +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3


....
. 테스트 테이블에 새로운 테스트 행을 삽입하고 기본 저장소에서 이미지 복사로 되돌리면 모든 트랜잭션이 복구되는지 검증합니다.
+
....

[oracle@orap ~]$ sqlplus / as sysdba

SQL*Plus: Release 19.0.0.0.0 - Production on Wed May 28 20:04:53 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2022, Oracle.  All rights reserved.


Connected to:
Oracle Database 19c Enterprise Edition Release 19.0.0.0.0 - Production
Version 19.18.0.0.0

SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 NTAP_PDB1                      READ WRITE NO
         4 NTAP_PDB2                      READ WRITE NO
         5 NTAP_PDB3                      READ WRITE NO
SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy


SQL> insert into test values(2, sysdate, 'Swing database back to primary storage from nfs backup mount on GCNV');

1 row created.

SQL> commit;

Commit complete.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV

         2
28-MAY-25 08.09.34.000000 PM
Swing database back to primary storage from nfs backup mount on GCNV

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------


SQL>

....
. RMAN에서 DB를 종료하여 기본 스토리지의 백업 이미지 복사본으로 다시 전환합니다.
+
....

[oracle@orap ~]$ rman target / nocatalog

Recovery Manager: Release 19.0.0.0.0 - Production on Wed May 28 20:01:55 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database: NTAP (DBID=1379265854)
using target database control file instead of recovery catalog

RMAN> shutdown abort;

Oracle instance shut down

RMAN> startup mount;

connected to target database (not started)
Oracle instance started
database mounted

Total System Global Area    5620363744 bytes

Fixed Size                     9175520 bytes
Variable Size               1023410176 bytes
Database Buffers            4580179968 bytes
Redo Buffers                   7598080 bytes

RMAN> switch database to copy;

datafile 1 switched to datafile copy "+DATA/NTAP/DATAFILE/system.285.1202266707"
datafile 3 switched to datafile copy "+DATA/NTAP/DATAFILE/sysaux.281.1202266713"
datafile 4 switched to datafile copy "+DATA/NTAP/DATAFILE/undotbs1.283.1202266839"
datafile 5 switched to datafile copy "+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093"
datafile 6 switched to datafile copy "+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977"
datafile 7 switched to datafile copy "+DATA/NTAP/DATAFILE/users.266.1202267179"
datafile 8 switched to datafile copy "+DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143"
datafile 9 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995"
datafile 10 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839"
datafile 11 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109"
datafile 12 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181"
datafile 13 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039"
datafile 14 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915"
datafile 15 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143"
datafile 16 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185"
datafile 17 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047"
datafile 18 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923"
datafile 19 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179"
datafile 20 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189"
datafile 21 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779"
datafile 22 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779"
datafile 23 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473"
datafile 24 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989"
datafile 25 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779"
datafile 26 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477"
datafile 27 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997"
datafile 28 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779"
datafile 29 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311"
datafile 30 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311"
datafile 31 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011"
datafile 32 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617"
datafile 33 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619"
datafile 34 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313"
datafile 35 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011"
datafile 36 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625"
datafile 37 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315"
datafile 38 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817"
datafile 39 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141"
datafile 40 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819"
datafile 41 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631"
datafile 42 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157"
datafile 43 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865"
datafile 44 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457"
datafile 45 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869"
datafile 46 switched to datafile copy "+DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457"
datafile 47 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157"
datafile 48 switched to datafile copy "+DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171"
datafile 49 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655"
datafile 50 switched to datafile copy "+DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669"

RMAN> recover database;

Starting recover at 28-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=139 device type=DISK

starting media recovery
media recovery complete, elapsed time: 00:00:07

Finished recover at 28-MAY-25

RMAN> alter database open;

Statement processed

RMAN>

....
. 데이터베이스가 이제 기본 저장소로 돌아갔는지 확인합니다.
+
....

RMAN> report schema;

Report of database schema for database with db_unique_name NTAP

List of Permanent Datafiles
===========================
File Size(MB) Tablespace           RB segs Datafile Name
---- -------- -------------------- ------- ------------------------
1    1070     SYSTEM               YES     +DATA/NTAP/DATAFILE/system.285.1202266707
3    1020     SYSAUX               NO      +DATA/NTAP/DATAFILE/sysaux.281.1202266713
4    680      UNDOTBS1             YES     +DATA/NTAP/DATAFILE/undotbs1.283.1202266839
5    400      PDB$SEED:SYSTEM      NO      +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/system.273.1202267093
6    460      PDB$SEED:SYSAUX      NO      +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/sysaux.278.1202266977
7    5        USERS                NO      +DATA/NTAP/DATAFILE/users.266.1202267179
8    235      PDB$SEED:UNDOTBS1    NO      +DATA/NTAP/35AD01790801A78FE063060B460ABC41/DATAFILE/undotbs1.268.1202267143
9    410      NTAP_PDB1:SYSTEM     YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/system.277.1202266995
10   510      NTAP_PDB1:SYSAUX     NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/sysaux.282.1202266839
11   240      NTAP_PDB1:UNDOTBS1   YES     +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/undotbs1.272.1202267109
12   5        NTAP_PDB1:USERS      NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/users.259.1202267181
13   410      NTAP_PDB2:SYSTEM     YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/system.275.1202267039
14   510      NTAP_PDB2:SYSAUX     NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/sysaux.280.1202266915
15   235      NTAP_PDB2:UNDOTBS1   YES     +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/undotbs1.260.1202267143
16   5        NTAP_PDB2:USERS      NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/users.258.1202267185
17   410      NTAP_PDB3:SYSTEM     YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/system.271.1202267047
18   510      NTAP_PDB3:SYSAUX     NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/sysaux.276.1202266923
19   235      NTAP_PDB3:UNDOTBS1   YES     +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/undotbs1.267.1202267179
20   5        NTAP_PDB3:USERS      NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/users.257.1202267189
21   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.315.1202239779
22   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.313.1202239779
23   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.305.1202247473
24   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.295.1202258989
25   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.311.1202239779
26   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.304.1202247477
27   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.294.1202258997
28   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.314.1202239779
29   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.303.1202251311
30   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.302.1202251311
31   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.293.1202259011
32   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.312.1202243617
33   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.310.1202243619
34   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.301.1202251313
35   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.292.1202259011
36   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.309.1202243625
37   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.299.1202251315
38   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.291.1202262817
39   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.300.1202255141
40   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.290.1202262819
41   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.308.1202243631
42   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.298.1202255157
43   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.289.1202262865
44   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.307.1202247457
45   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.288.1202262869
46   30720    NTAP_PDB1:SOE1       NO      +DATA/NTAP/35AD38314E81AF11E063060B460AE362/DATAFILE/soe1.306.1202247457
47   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.297.1202255157
48   30720    NTAP_PDB2:SOE2       NO      +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/DATAFILE/soe2.296.1202255171
49   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.287.1202266655
50   30720    NTAP_PDB3:SOE3       NO      +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/DATAFILE/soe3.286.1202266669

List of Temporary Files
=======================
File Size(MB) Tablespace           Maxsize(MB) Tempfile Name
---- -------- -------------------- ----------- --------------------
1    123      TEMP                 32767       +DATA/NTAP/TEMPFILE/temp.265.1201727469
2    123      PDB$SEED:TEMP        32767       +DATA/NTAP/35AD01790801A78FE063060B460ABC41/TEMPFILE/temp.269.1201728335
3    16384    NTAP_PDB1:TEMP       32767       +DATA/NTAP/35AD38314E81AF11E063060B460AE362/TEMPFILE/temp.274.1201729271
4    30720    NTAP_PDB2:TEMP       32767       +DATA/NTAP/35AD39A949B7AF76E063060B460A61D2/TEMPFILE/temp.279.1201729295
5    30720    NTAP_PDB3:TEMP       32767       +DATA/NTAP/35AD3B0BAD41AFCEE063060B460AD1CC/TEMPFILE/temp.284.1201729319


....
. sqlplus에서 모든 트랜잭션이 테스트 테이블에 복구되었는지 확인합니다.
+
....

SQL> alter session set container=ntap_pdb1;

Session altered.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV

         2
28-MAY-25 08.09.34.000000 PM
Swing database back to primary storage from nfs backup mount on GCNV

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------


SQL> select systimestamp from dual;

SYSTIMESTAMP
---------------------------------------------------------------------------
28-MAY-25 08.17.55.895654 PM +00:00

SQL>


....
. 마지막으로, GCNV 백업 저장소에 있는 오래된 DB 이미지 복사본을 삭제하고 GCNV 백업 저장소에 새 백업 이미지를 만들어 주기를 완료합니다.


====


==== 모든 Oracle 파일이 손실된 시점 복구

[%collapsible%open]
====
기본 스토리지 및/또는 기본 DB 서버 호스트가 손실되는 장애 발생 시, 보관된 로그 파일에 없는 모든 트랜잭션은 손실됩니다. 하지만 GCNV NFS 파일 시스템에서 사용 가능한 Oracle 데이터베이스 백업 이미지 복사본이 유용하게 제공됩니다. 백업 이미지 복사본을 사용하여 기본 데이터베이스를 동일한 기본 데이터베이스 서버 또는 대기 데이터베이스 서버(사용 가능한 경우)로 신속하게 복구할 수 있습니다. 이 섹션에서는 기본 DB 서버로 복구하는 단계별 절차를 설명합니다. 새 대기 DB 서버로 복구하는 방법은 거의 동일하지만, 데이터베이스 백업 이미지 복사본은 동일한 Oracle 소프트웨어 스택이 설치 및 구성된 대기 DB 서버에 마운트해야 합니다.

. 이전에 Oracle VLDB 지정 시간 복구 검증을 위해 생성한 테이블을 테스트하기 위해 행을 삽입합니다.
+
....

SQL> insert into test values(3, sysdate, 'validate a point-in-time recovery by switching to DB backup copy on GCNV');

1 row created.

SQL> commit;

Commit complete.

SQL> select * from test;

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------
         1
27-MAY-25 05.35.44.000000 PM
validate a full recovery after a switch to DB backup copy on GCNV

         2
28-MAY-25 08.09.34.000000 PM
Swing database back to primary storage from nfs backup mount on GCNV

        ID
----------
DT
---------------------------------------------------------------------------
EVENT
--------------------------------------------------------------------------------

         3
29-MAY-25 03.22.22.000000 PM
validate a point-in-time recovery by switching to DB backup copy on GCNV

....
. 현재 로그 파일을 보관하여 트랜잭션이 보관된 로그 파일에 푸시되도록 합니다.
+
....

SQL> alter session set container=cdb$root;

Session altered.

SQL> alter system archive log current;

System altered.

....
. 운영 VDB 서버 호스트를 종료하여 스토리지 및 DB 서버 호스트의 전체 장애를 시뮬레이션합니다.
. 대기 DB 서버에서 복구를 수행하는 경우, 해당 서버가 기본 DB 서버 호스트와 동일한 OS, 동일한 버전이며, OS 커널이 패치되었는지 확인하세요. 또한 소프트웨어 전용 옵션을 사용하여 스탠바이 DB 서버에 동일한 Oracle 버전 및 패치를 설치 및 구성했습니다.
. 또한, oratab, oracle 사용자 .bash_profile 등과 같이 기본 DB 서버와 유사하게 대기 DB 서버에서도 oracle 환경을 구성합니다. 이러한 파일을 GCNV NFS 마운트 지점에 백업하는 것이 좋습니다.
. 그런 다음 GCNV NFS 파일 시스템의 Oracle 데이터베이스 백업 이미지 복사본이 복구를 위해 대기 DB 서버에 마운트됩니다. 다음 절차는 프로세스 세부 사항을 보여줍니다.
+
관리자로서 마운트 지점을 생성합니다.

+
[source, cli]
----
sudo mkdir /nfsgcnv
----
+
관리자 사용자로 Oracle VLDB 백업 이미지 복사본이 저장된 NFS 볼륨을 마운트합니다.

+
[source, cli]
----
sudo mount 10.165.128.5:/orap-bkup /nfsgcnv -o rw,bg,hard,vers=3,proto=tcp,timeo=600,rsize=262144,wsize=262144
----
. 복구를 위해 GCNV NFS 마운트에서 사용 가능한 Oracle 아카이브 로그를 확인하고 마지막 로그 파일 로그 시퀀스 번호를 기록합니다. 우리의 테스트 케이스에서는 27이었습니다. 복구 시점은 로그 시퀀스 번호 28입니다.
. 스탠바이 DB 호스트에서 복구하는 경우, Oracle 사용자로 ORACLE_HOME 변수를 스탠바이 DB 서버의 현재 Oracle 설치 환경으로, ORACLE_SID를 기본 Oracle 인스턴스 SID로 설정합니다. 이 테스트에서는 NTAP입니다.
+
....

[oracle@ora-02 ~]$ export ORACLE_HOME=/u01/app/oracle/product/19.0.0/NTAP
[oracle@ora-02 ~]$ export ORACLE_SID=NTAP
[oracle@ora-02 ~]$ export PATH=$PATH:$ORACLE_HOME/bin

....
. Oracle 사용자는 적절한 관리 디렉토리가 구성된 $ORACLE_HOME/dbs 디렉토리에 일반 Oracle 초기화 파일을 생성합니다. 가장 중요한 것은 Oracle을 갖는 것입니다.  `flash recovery area` 기본 Oracle VLDB 서버에 정의된 GCNV NFS 마운트 경로를 가리킵니다.  `flash recovery area` 구성은 섹션에 `Setup Oracle RMAN incremental merge to image copy on GCNV for in-server VLDB backup`설명되어 있습니다. Oracle 제어 파일을 GCNV NFS 백업 파일 시스템으로 설정합니다.
+
[source, cli]
----
vi /home/oracle/initNTAP.ora
----
+
다음 예제 항목이 있는 경우:

+
....

*.audit_file_dest='/u01/app/oracle/admin/NTAP/adump'
*.audit_trail='db'
*.compatible='19.0.0'
*.control_files=('/nfsgcnv/oracopy/NTAP.ctl')
*.db_block_size=8192
*.db_create_file_dest='/nfsgcnv/oracopy/'
*.db_name='NTAP'
*.db_recovery_file_dest_size=85899345920
*.db_recovery_file_dest='/nfsgcnv/archlog/'
*.diagnostic_dest='/u01/app/oracle'
*.enable_pluggable_database=true
*.local_listener='LISTENER'
*.nls_language='AMERICAN'
*.nls_territory='AMERICA'
*.pga_aggregate_target=1024m
*.processes=320
*.remote_login_passwordfile='EXCLUSIVE'
*.sga_target=10240m


....
+
일치하지 않는 경우 위의 초기화 파일을 기본 Oracle VLDB 서버에서 복원된 백업 초기화 파일로 교체해야 합니다.

. Oracle 사용자로 RMAN을 실행하여 기본 또는 대기 DB 서버 호스트에서 Oracle 복구를 실행합니다. 먼저 Oracle 인스턴스를 시작합니다.  `nomount` 상태.
+
....

[oracle@orap ~]$ rman target / nocatalog

Recovery Manager: Release 19.0.0.0.0 - Production on Thu May 29 15:46:15 2025
Version 19.18.0.0.0

Copyright (c) 1982, 2019, Oracle and/or its affiliates.  All rights reserved.

connected to target database (not started)

RMAN> startup nomount pfile='/home/oracle/initNTAP.ora';

Oracle instance started

Total System Global Area   10737418000 bytes

Fixed Size                     9174800 bytes
Variable Size               1577058304 bytes
Database Buffers            9126805504 bytes
Redo Buffers                  24379392 bytes

....
. 데이터베이스 ID를 설정합니다. 데이터베이스 ID는 GCNV NFS 마운트 지점에 있는 이미지 복사본의 Oracle 파일 이름에서 검색할 수 있습니다.
+
....

RMAN> set dbid = 1379265854;

executing command: SET DBID

....
. 자동 백업에서 제어 파일을 복원합니다. Oracle 제어 파일 및 spfile 자동 백업이 활성화된 경우 모든 증분 백업 및 병합 주기에 백업됩니다. 여러 복제본을 사용할 수 있는 경우 최신 백업이 복구됩니다.
+
....

RMAN> restore controlfile from autobackup;

Starting restore at 29-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=2 device type=DISK

recovery area destination: /nfsgcnv/archlog/
database name (or database unique name) used for search: NTAP
channel ORA_DISK_1: AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp found in the recovery area
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20250529
channel ORA_DISK_1: restoring control file from AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp
channel ORA_DISK_1: control file restore from AUTOBACKUP complete
output file name=/nfsgcnv/oracopy/NTAP.ctl
Finished restore at 29-MAY-25


....
. 나중에 기본 VLDB와 일치하도록 매개변수 파일을 업데이트하기 위해 spfile에서 $ORACLE_HOME/dbs 폴더로 init 파일을 복원합니다.
+
....
RMAN> restore spfile to pfile '/u01/app/oracle/product/19.0.0/NTAP/dbs/initNTAP.ora' from autobackup;

Starting restore at 29-MAY-25
using channel ORA_DISK_1

recovery area destination: /nfsgcnv/archlog/
database name (or database unique name) used for search: NTAP
channel ORA_DISK_1: AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp found in the recovery area
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20250529
channel ORA_DISK_1: restoring spfile from AUTOBACKUP /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp
channel ORA_DISK_1: SPFILE restore from AUTOBACKUP complete
Finished restore at 29-MAY-25

....
. 제어 파일을 마운트하고 데이터베이스 백업 이미지 복제본을 확인합니다.
+
....

RMAN> alter database mount;

released channel: ORA_DISK_1
Statement processed

RMAN> list copy of database tag 'ORACOPYBKUPONGCNV_LEVEL_0';

List of Datafile Copies
=======================

Key     File S Completion Time Ckp SCN    Ckp Time        Sparse
------- ---- - --------------- ---------- --------------- ------
273     1    A 29-MAY-25       3310055    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

274     3    A 29-MAY-25       3310333    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

275     4    A 29-MAY-25       3310521    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

283     5    A 29-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_6t3qlaa4
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

279     6    A 29-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_6p3ql9vu
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

288     7    A 29-MAY-25       3311276    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif
        Tag: ORACOPYBKUPONGCNV_LEVEL_0

285     8    A 29-MAY-25       2377077    21-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_6v3qlae9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 2, PDB Name: PDB$SEED

280     9    A 29-MAY-25       3310854    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

276     10   A 29-MAY-25       3310587    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

284     11   A 29-MAY-25       3311150    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

289     12   A 29-MAY-25       3311281    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

281     13   A 29-MAY-25       3310906    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

277     14   A 29-MAY-25       3310662    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

286     15   A 29-MAY-25       3311229    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

290     16   A 29-MAY-25       3311286    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

282     17   A 29-MAY-25       3311063    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

278     18   A 29-MAY-25       3310747    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

287     19   A 29-MAY-25       3311242    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

291     20   A 29-MAY-25       3311290    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

251     21   A 28-MAY-25       3261788    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

295     22   A 29-MAY-25       3261776    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

255     23   A 29-MAY-25       3266361    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

266     24   A 29-MAY-25       3280010    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

296     25   A 29-MAY-25       3261780    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

257     26   A 29-MAY-25       3270370    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

268     27   A 29-MAY-25       3280164    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

297     28   A 29-MAY-25       3261784    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

258     29   A 29-MAY-25       3270566    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

259     30   A 29-MAY-25       3270571    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

267     31   A 29-MAY-25       3280168    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

249     32   A 28-MAY-25       3261793    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

250     33   A 28-MAY-25       3261797    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

260     34   A 29-MAY-25       3270587    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

269     35   A 29-MAY-25       3284192    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

252     36   A 28-MAY-25       3261801    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

261     37   A 29-MAY-25       3275627    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

270     38   A 29-MAY-25       3297172    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

262     39   A 29-MAY-25       3275722    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

271     40   A 29-MAY-25       3297259    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

253     41   A 29-MAY-25       3266273    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

264     42   A 29-MAY-25       3275738    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

272     43   A 29-MAY-25       3297314    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

254     44   A 29-MAY-25       3266318    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

292     45   A 29-MAY-25       3309950    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

256     46   A 29-MAY-25       3266357    28-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 3, PDB Name: NTAP_PDB1

263     47   A 29-MAY-25       3275799    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

265     48   A 29-MAY-25       3279927    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 4, PDB Name: NTAP_PDB2

293     49   A 29-MAY-25       3309965    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3

294     50   A 29-MAY-25       3310038    29-MAY-25       NO
        Name: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955
        Tag: ORACOPYBKUPONGCNV_LEVEL_0
        Container ID: 5, PDB Name: NTAP_PDB3


....
. 데이터베이스를 복원하지 않고 복구를 실행하도록 데이터베이스를 복제본으로 전환합니다.
+
....

RMAN> switch database to copy;

Starting implicit crosscheck backup at 29-MAY-25
allocated channel: ORA_DISK_1
channel ORA_DISK_1: SID=12 device type=DISK
Crosschecked 20 objects
Finished implicit crosscheck backup at 29-MAY-25

Starting implicit crosscheck copy at 29-MAY-25
using channel ORA_DISK_1
Crosschecked 49 objects
Finished implicit crosscheck copy at 29-MAY-25

searching for all files in the recovery area
cataloging files...
cataloging done

List of Cataloged Files
=======================
File Name: /nfsgcnv/archlog/NTAP/archivelog/2025_05_29/o1_mf_1_27_n3jzbgh2_.arc
File Name: /nfsgcnv/archlog/NTAP/autobackup/2025_05_29/o1_mf_s_1202395822_n3jx1hnf_.bkp

datafile 1 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a"
datafile 3 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3"
datafile 4 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu"
datafile 5 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_6t3qlaa4"
datafile 6 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_6p3ql9vu"
datafile 7 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif"
datafile 8 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_6v3qlae9"
datafile 9 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21"
datafile 10 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh"
datafile 11 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg"
datafile 12 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij"
datafile 13 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52"
datafile 14 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou"
datafile 15 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft"
datafile 16 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik"
datafile 17 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n"
datafile 18 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9"
datafile 19 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago"
datafile 20 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail"
datafile 21 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8"
datafile 22 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h"
datafile 23 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o"
datafile 24 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv"
datafile 25 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h"
datafile 26 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo"
datafile 27 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9"
datafile 28 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h"
datafile 29 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09"
datafile 30 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g"
datafile 31 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9"
datafile 32 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9"
datafile 33 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9"
datafile 34 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b"
datafile 35 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412"
datafile 36 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda"
datafile 37 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf"
datafile 38 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q"
datafile 39 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn"
datafile 40 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5"
datafile 41 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37"
datafile 42 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq"
datafile 43 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo"
datafile 44 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m"
datafile 45 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c"
datafile 46 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o"
datafile 47 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5"
datafile 48 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4"
datafile 49 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s"
datafile 50 switched to datafile copy "/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955"


....
. 플래시 복구 영역에서 사용 가능한 마지막 아카이브 로그까지 Oracle 복구를 실행합니다.
+
....

RMAN> run {
2> set until sequence=28;
3> recover database;
4> }

executing command: SET until clause

Starting recover at 29-MAY-25
using channel ORA_DISK_1
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00011: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg
destination for restore of datafile 00025: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h
destination for restore of datafile 00036: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda
destination for restore of datafile 00046: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/773qm6l7_231_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/773qm6l7_231_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00012: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij
destination for restore of datafile 00028: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h
destination for restore of datafile 00041: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37
destination for restore of datafile 00044: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7a3qm6l7_234_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7a3qm6l7_234_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:02
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00015: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft
destination for restore of datafile 00029: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09
destination for restore of datafile 00039: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn
destination for restore of datafile 00048: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/783qm6l7_232_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/783qm6l7_232_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00019: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago
destination for restore of datafile 00031: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9
destination for restore of datafile 00043: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo
destination for restore of datafile 00050: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/793qm6l7_233_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/793qm6l7_233_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00010: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh
destination for restore of datafile 00021: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8
destination for restore of datafile 00032: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7d3qm6l9_237_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7d3qm6l9_237_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00014: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou
destination for restore of datafile 00023: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o
destination for restore of datafile 00034: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7e3qm6l9_238_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7e3qm6l9_238_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00016: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik
destination for restore of datafile 00030: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g
destination for restore of datafile 00042: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq
destination for restore of datafile 00047: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7b3qm6l9_235_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7b3qm6l9_235_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00020: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail
destination for restore of datafile 00035: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412
destination for restore of datafile 00045: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c
destination for restore of datafile 00049: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7c3qm6l9_236_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7c3qm6l9_236_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00001: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7j3qm6la_243_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7j3qm6la_243_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00009: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21
destination for restore of datafile 00022: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h
destination for restore of datafile 00033: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7g3qm6l9_240_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7g3qm6l9_240_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00013: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52
destination for restore of datafile 00026: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo
destination for restore of datafile 00037: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7h3qm6la_241_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7h3qm6la_241_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00017: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n
destination for restore of datafile 00027: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9
destination for restore of datafile 00040: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7i3qm6la_242_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7i3qm6la_242_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00018: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9
destination for restore of datafile 00024: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv
destination for restore of datafile 00038: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7f3qm6l9_239_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7f3qm6l9_239_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00004: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7l3qm6la_245_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7l3qm6la_245_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:02
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00007: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7p3qm6lb_249_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7p3qm6lb_249_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:01
channel ORA_DISK_1: starting incremental datafile backup set restore
channel ORA_DISK_1: specifying datafile(s) to restore from backup set
destination for restore of datafile 00003: /nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3
channel ORA_DISK_1: reading from backup piece /nfsgcnv/oracopy/7k3qm6la_244_1_1
channel ORA_DISK_1: piece handle=/nfsgcnv/oracopy/7k3qm6la_244_1_1 tag=ORACOPYBKUPONGCNV_LEVEL_0
channel ORA_DISK_1: restored backup piece 1
channel ORA_DISK_1: restore complete, elapsed time: 00:00:03

starting media recovery

archived log for thread 1 with sequence 27 is already on disk as file /nfsgcnv/archlog/NTAP/archivelog/2025_05_29/o1_mf_1_27_n3jzbgh2_.arc
archived log file name=/nfsgcnv/archlog/NTAP/archivelog/2025_05_29/o1_mf_1_27_n3jzbgh2_.arc thread=1 sequence=27
media recovery complete, elapsed time: 00:00:01
Finished recover at 29-MAY-25

RMAN>
RMAN> exit


Recovery Manager complete.

....
+

NOTE: 더 빠른 복구를 위해서는 recovery_parallelism 매개 변수를 사용하여 병렬 세션을 설정하거나 데이터베이스 복구를 위한 복구 명령에서 병렬 처리 수준을 지정합니다. `RECOVER DATABASE PARALLEL (DEGREE d INSTANCES DEFAULT);`. 일반적으로 병렬 처리 수는 호스트의 CPU 코어 수와 같아야 합니다.

. RMAN을 종료하고 sqlplus를 통해 Oracle 사용자로 로그인하여 데이터베이스를 열고 불완전한 복구 후 로그를 재설정합니다.
+
....

SQL> select name, open_mode from v$database;

NAME      OPEN_MODE
--------- --------------------
NTAP      MOUNTED

SQL> select instance_name, host_name from v$instance;

INSTANCE_NAME
----------------
HOST_NAME
----------------------------------------------------------------
NTAP
orap


SQL> select member from v$logfile;

MEMBER
--------------------------------------------------------------------------------
+DATA/NTAP/ONLINELOG/group_3.264.1201727425
+LOGS/NTAP/ONLINELOG/group_3.259.1201727433
+DATA/NTAP/ONLINELOG/group_2.263.1201727425
+LOGS/NTAP/ONLINELOG/group_2.257.1201727431
+DATA/NTAP/ONLINELOG/group_1.262.1201727425
+LOGS/NTAP/ONLINELOG/group_1.258.1201727433

6 rows selected.

SQL> alter database rename file '+LOGS/NTAP/ONLINELOG/group_1.258.1201727433' to '/nfsgcnv/oracopy/group_1.258.1201727433';

Database altered.

SQL> alter database rename file '+DATA/NTAP/ONLINELOG/group_1.262.1201727425' to '/nfsgcnv/oracopy/group_1.262.1201727425';

Database altered.

SQL> alter database rename file '+LOGS/NTAP/ONLINELOG/group_2.257.1201727431' to '/nfsgcnv/oracopy/group_2.257.1201727431';

Database altered.

SQL> alter database rename file '+DATA/NTAP/ONLINELOG/group_2.263.1201727425' to '/nfsgcnv/oracopy/group_2.263.1201727425';

Database altered.

SQL> alter database rename file '+LOGS/NTAP/ONLINELOG/group_3.259.1201727433' to '/nfsgcnv/oracopy/group_3.259.1201727433';

Database altered.

SQL> alter database rename file '+DATA/NTAP/ONLINELOG/group_3.264.1201727425' to '/nfsgcnv/oracopy/group_3.264.1201727425';

Database altered.

SQL> alter database open resetlogs;

Database altered.

SQL> show pdbs

    CON_ID CON_NAME                       OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
         2 PDB$SEED                       READ ONLY  NO
         3 NTAP_PDB1                      READ WRITE NO
         4 NTAP_PDB2                      READ WRITE NO
         5 NTAP_PDB3                      READ WRITE NO

....
. 데이터베이스 파일이 이제 GCNV의 백업 파일 시스템에 있는지 확인합니다.
+
....

SQL> select name from v$datafile;

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-1_6j3ql96a
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-3_6k3ql9c3
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-4_6l3ql9hu
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-5_6t3qlaa4
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-6_6p3ql9vu
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-7_723qlaif
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-8_6v3qlae9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-9_6q3qla21
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-10_6m3ql9lh
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-11_6u3qlacg
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-12_733qlaij

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-13_6r3qla52
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-14_6n3ql9ou
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-15_703qlaft
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-16_743qlaik
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSTEM_FNO-17_6s3qla7n
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SYSAUX_FNO-18_6o3ql9s9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-UNDOTBS1_FNO-19_713qlago
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-USERS_FNO-20_753qlail
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-21_5o3qkcd8
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-22_5i3qk79h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-23_5v3qkh6o

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-24_693qkvfv
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-25_5j3qk79h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-26_603qklqo
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-27_6a3qkvj9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-28_5k3qk79h
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-29_613qkm09
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-30_623qkm0g
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-31_6b3qkvj9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-32_5p3qkcd9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-33_5q3qkcd9
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-34_633qkm1b

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-35_6c3ql412
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-36_5r3qkcda
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-37_643qkqjf
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-38_6d3ql47q
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-39_653qkqnn
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-40_6e3ql4b5
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-41_5s3qkh37
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-42_663qkqoq
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-43_6f3ql4bo
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-44_5t3qkh4m
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-45_6g3ql91c

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE1_FNO-46_5u3qkh6o
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-47_673qkqr5
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE2_FNO-48_683qkvb4
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-49_6h3ql91s
/nfsgcnv/oracopy/data_D-NTAP_I-1379265854_TS-SOE3_FNO-50_6i3ql955

49 rows selected.

SQL> select member from v$logfile;

MEMBER
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/group_3.264.1201727425
/nfsgcnv/oracopy/group_3.259.1201727433
/nfsgcnv/oracopy/group_2.263.1201727425
/nfsgcnv/oracopy/group_2.257.1201727431
/nfsgcnv/oracopy/group_1.262.1201727425
/nfsgcnv/oracopy/group_1.258.1201727433

6 rows selected.


SQL> select name from v$controlfile;

NAME
--------------------------------------------------------------------------------
/nfsgcnv/oracopy/NTAP.ctl


....
. 기타 복구 후 작업
+
....

- Add GCNV NFS mount to fstab of the standby DB server if recovering from a standby DB server so that the NFS file system will be mounted when DB server host rebooted.

- Update pfile restored to $ORACLE_HOME/dbs directory and create spfile from pfile.

....
. , 기본 스토리지를 대기 DB 서버로 가져와야 합니다. 또한 GCNV NFS 마운트에 있는 Oracle 제어 파일과 현재 온라인 로그 파일을 기본 스토리지로 다시 옮겨야 하는데, 이는 몇 분 정도의 다운타임으로 완료할 수 있습니다.


이로써 GCNV NFS 파일 시스템의 백업 이미지 복사본에서 동일한 기본 DB 서버 또는 대기 DB 서버로 Oracle VLDB 데이터베이스의 특정 시점 복구가 완료됩니다.

====


=== 백업 이미지 복사본에서 다른 사용 사례를 위해 Oracle VLDB를 복제합니다.

[%collapsible%open]
====
GCNV의 백업 이미지 사본에서 새 Oracle VLDB를 복제하는 것은 기본 데이터베이스를 새 DB 서버로 특정 시점 복구하는 것과 유사합니다. NetApp Solutions 엔지니어링 팀은 전체 프로세스를 신속하고 간편하게 구현할 수 있도록 자동화 툴킷을 제공합니다.

다음 자동화 툴킷에는 NFS 마운트를 통해 GCNV 스토리지에 저장된 기본 데이터베이스 백업 이미지 사본에서 Oracle VLDB의 복제본을 만들거나 새로 고치는 데 사용할 수 있는 플레이북이 포함되어 있어 완전한 복제 수명 주기를 관리할 수 있습니다. 자세한 내용은 다음 문서를 참조하세요. link:https://docs.netapp.com/us-en/netapp-solutions/databases/automation_ora_bkup_clone.html["서버 내 이미지 백업을 통한 자동화된 Oracle VLDB 복제 수명 주기"^] .

[source, cli]
----
https://bitbucket.ngage.netapp.com/mvc/projects/NS-BB/repos/na_oracle_bkup_clone/browse
----

NOTE: 이 툴킷은 현재 BitBucket 액세스 권한이 있는 NetApp 내부 사용자만 액세스할 수 있습니다. 외부 사용자에 관심이 있는 경우, 어카운트 팀에서 액세스 권한을 요청하거나 NetApp 솔루션 엔지니어링 팀에 문의하십시오.

====


== 추가 정보를 찾을 수 있는 위치

이 문서에 설명된 정보에 대한 자세한 내용은 다음 문서 및/또는 웹 사이트를 참조하십시오.

* NetApp의 동급 최고 파일 스토리지 서비스로, Google Cloud에 제공됩니다
+
link:https://cloud.google.com/netapp-volumes?hl=en["https://cloud.google.com/netapp-volumes?hl=en"^]

* RMAN: 병합된 증분 백업 전략(Doc ID 745798.1)
+
link:https://support.oracle.com/knowledge/Oracle%20Database%20Products/745798_1.html["https://support.oracle.com/knowledge/Oracle%20Database%20Products/745798_1.html"^]

* RMAN 백업 및 복구 사용자 가이드
+
link:https://docs.oracle.com/en/database/oracle/oracle-database/19/bradv/getting-started-rman.html["https://docs.oracle.com/en/database/oracle/oracle-database/19/bradv/getting-started-rman.html"^]


