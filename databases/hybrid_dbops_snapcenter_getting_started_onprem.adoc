---
sidebar: sidebar 
permalink: databases/hybrid_dbops_snapcenter_getting_started_onprem.html 
summary: 'NetApp SnapCenter 툴은 RBAC(역할 기반 액세스 제어)를 사용하여 사용자 리소스 액세스 및 권한 부여를 관리하고 SnapCenter 설치를 통해 미리 채워진 역할을 생성합니다. 필요에 따라 사용자 지정 역할을 만들 수도 있습니다.' 
keywords: workflow, on premises, rbac, roles, permissions 
---
= 온프레미스에서 시작합니다
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:table-stripes: odd
:imagesdir: ./../media/


[role="lead"]
NetApp SnapCenter 툴은 RBAC(역할 기반 액세스 제어)를 사용하여 사용자 리소스 액세스 및 권한 부여를 관리하고 SnapCenter 설치를 통해 미리 채워진 역할을 생성합니다. 필요에 따라 사용자 지정 역할을 만들 수도 있습니다.



== 온프레미스



=== SnapCenter에서 데이터베이스 관리자 설정

데이터베이스 백업, 복원 및/또는 재해 복구를 위해 SnapCenter에서 지원하는 각 데이터베이스 플랫폼에 대해 전용 관리 사용자 ID를 갖는 것이 적합합니다. 단일 ID를 사용하여 모든 데이터베이스를 관리할 수도 있습니다. 테스트 사례 및 데모에서는 Oracle과 SQL Server 모두에 대해 각각 전용 관리 사용자를 생성했습니다.

특정 SnapCenter 리소스는 SnapCenter 관리자 역할만 사용하여 프로비저닝할 수 있습니다. 그러면 액세스를 위해 리소스를 다른 사용자 ID에 할당할 수 있습니다.

사전 설치 및 구성된 사내 SnapCenter 환경에서는 다음 작업이 이미 완료되었을 수 있습니다. 그렇지 않은 경우 다음 단계에 따라 데이터베이스 관리자 사용자를 생성합니다.

. Windows Active Directory에 관리자 사용자를 추가합니다.
. SnapCenter CenterAdmin 역할로 부여된 ID를 사용하여 로그인합니다.
. 설정 및 사용자 아래의 액세스 탭으로 이동하고 추가 를 클릭하여 새 사용자를 추가합니다. 새 사용자 ID는 1단계에서 Windows Active Directory에서 만든 관리자 사용자에게 연결됩니다. . 필요에 따라 사용자에게 적절한 역할을 할당합니다. 필요에 따라 admin 사용자에게 리소스를 할당합니다.


image::snapctr_admin_users.PNG[snapctr 관리자]



=== 2.SnapCenter 플러그인 설치 필수 구성 요소입니다

SnapCenter는 DB 호스트에서 실행 중인 플러그인 에이전트를 사용하여 백업, 복구, 클론 및 기타 기능을 수행합니다. 플러그인 설치 및 기타 관리 기능을 위해 설정 및 자격 증명 탭에서 구성된 자격 증명을 통해 데이터베이스 호스트 및 데이터베이스에 연결합니다. Linux 또는 Windows와 같은 타겟 호스트 유형과 데이터베이스 유형에 따른 특정 권한 요구 사항이 있습니다.

SnapCenter 플러그인 설치 전에 DB 호스트 자격 증명을 구성해야 합니다. 일반적으로 플러그인 설치를 위한 호스트 연결 자격 증명으로 DB 호스트의 관리자 사용자 계정을 사용합니다. 또한 OS 기반 인증을 사용하여 데이터베이스 액세스에 동일한 사용자 ID를 부여할 수도 있습니다. 반면, DB 관리 액세스를 위해 서로 다른 데이터베이스 사용자 ID를 사용하여 데이터베이스 인증을 사용할 수도 있습니다. OS 기반 인증을 사용하기로 결정한 경우 OS 관리자 사용자 ID에 DB 액세스 권한이 부여되어야 합니다. Windows 도메인 기반 SQL Server 설치의 경우 도메인 관리자 계정을 사용하여 도메인 내의 모든 SQL Server를 관리할 수 있습니다.

SQL Server용 Windows 호스트:

. 인증에 Windows 자격 증명을 사용하는 경우 플러그인을 설치하기 전에 자격 증명을 설정해야 합니다.
. 인증에 SQL Server 인스턴스를 사용하는 경우 플러그인을 설치한 후 자격 증명을 추가해야 합니다.
. 자격 증명을 설정하는 동안 SQL 인증을 사용하도록 설정한 경우 검색된 인스턴스 또는 데이터베이스에 빨간색 잠금 아이콘이 표시됩니다. 잠금 아이콘이 나타나면 인스턴스 또는 데이터베이스 자격 증명을 지정하여 인스턴스 또는 데이터베이스를 리소스 그룹에 성공적으로 추가해야 합니다.
. 다음 조건이 충족될 경우 sysadmin 액세스 없이 RBAC 사용자에게 자격 증명을 할당해야 합니다.
+
** 자격 증명이 SQL 인스턴스에 할당됩니다.
** SQL 인스턴스 또는 호스트는 RBAC 사용자에게 할당됩니다.
** RBAC DB 관리자 사용자에게는 리소스 그룹과 백업 권한이 모두 있어야 합니다.




Oracle용 UNIX 호스트:

. sshd.conf를 편집하고 sshd 서비스를 다시 시작하여 루트 또는 루트 이외의 사용자에 대해 암호 기반 SSH 연결을 활성화해야 합니다. AWS 인스턴스의 암호 기반 SSH 인증은 기본적으로 해제되어 있습니다.
. 비루트 사용자에 대한 sudo 권한을 구성하여 플러그인 프로세스를 설치 및 시작합니다. 플러그인을 설치하면 프로세스가 효과적인 루트 사용자로 실행됩니다.
. 설치 사용자에 대한 Linux 인증 모드를 사용하여 자격 증명을 생성합니다.
. Linux 호스트에 Java 1.8.x(64비트)를 설치해야 합니다.
. Oracle 데이터베이스 플러그인을 설치하면 Unix용 SnapCenter 플러그인도 설치됩니다.




=== 3.SnapCenter 호스트 플러그인 설치


NOTE: 클라우드 DB 서버 인스턴스에 SnapCenter 플러그인을 설치하기 전에 컴퓨팅 인스턴스 구축을 위한 관련 클라우드 섹션에 나와 있는 대로 모든 구성 단계를 완료해야 합니다.

다음 단계에서는 SnapCenter 플러그인이 호스트에 설치되어 있는 동안 데이터베이스 호스트를 SnapCenter에 추가하는 방법을 보여 줍니다. 이 절차는 사내 호스트와 클라우드 호스트를 모두 추가하는 데 적용됩니다. 다음 데모에서는 AWS에 상주하는 Windows 또는 Linux 호스트를 추가합니다.



==== SnapCenter VMware 글로벌 설정을 구성합니다

설정 > 전역 설정 으로 이동합니다. 하이퍼바이저 설정 에서 "VM에 모든 호스트에 대한 iSCSI 직접 연결 디스크 또는 NFS가 있음"을 선택하고 업데이트 를 클릭합니다.

image::snapctr_vmware_global.PNG[snapctr VMware global입니다]



==== 호스트에 Windows 호스트 및 플러그인 설치를 추가합니다

. SnapCenter에 SnapCenterAdmin 권한으로 사용자 ID를 사용하여 로그인합니다.
. 왼쪽 메뉴에서 호스트 탭을 클릭한 다음 추가를 클릭하여 호스트 추가 워크플로우를 엽니다.
. 호스트 유형에 Windows를 선택합니다. 호스트 이름은 호스트 이름 또는 IP 주소일 수 있습니다. 호스트 이름은 SnapCenter 호스트에서 올바른 호스트 IP 주소로 확인되어야 합니다. 2단계에서 생성한 호스트 자격 증명을 선택합니다. 설치할 플러그인 패키지로 Microsoft Windows 및 Microsoft SQL Server를 선택합니다.
+
image::snapctr_add_windows_host_01.PNG[snapctr Windows 호스트 01을 추가합니다]

. Windows 호스트에 플러그인을 설치하면 전체 상태가 "Configure log directory"로 표시됩니다.
+
image::snapctr_add_windows_host_02.PNG[snapctr Windows 호스트 02를 추가합니다]

. 호스트 이름을 클릭하여 SQL Server 로그 디렉토리 구성을 엽니다.
+
image::snapctr_add_windows_host_03.PNG[snapctr Windows 호스트 03을 추가합니다]

. "로그 디렉토리 구성"을 클릭하여 "SQL Server용 플러그인 구성"을 엽니다.
+
image::snapctr_add_windows_host_04.PNG[snapctr Windows 호스트 04 추가]

. 찾아보기 를 클릭하여 로그 디렉토리를 설정할 수 있도록 NetApp 스토리지를 검색합니다. SnapCenter는 이 로그 디렉토리를 사용하여 SQL Server 트랜잭션 로그 파일을 롤업합니다. 저장을 클릭합니다.
+
image::snapctr_add_windows_host_05.PNG[snapctr Windows 호스트 05를 추가합니다]

+

NOTE: DB 호스트에 프로비저닝된 NetApp 스토리지의 경우 CVO의 6단계에 나와 있는 것처럼 SnapCenter에 스토리지(온프레미스 또는 CVO)를 추가해야 합니다.

. 로그 디렉토리가 구성된 후 Windows 호스트 플러그인 전체 상태가 실행 중 으로 변경됩니다.
+
image::snapctr_add_windows_host_06.PNG[snapctr Windows 호스트 06 을 추가합니다]

. 데이터베이스를 관리하는 사용자 ID에 호스트를 할당하려면 설정 및 사용자 아래의 액세스 탭으로 이동하고 데이터베이스 관리 사용자 ID(호스트를 할당해야 하는 sqlldba인 경우)를 클릭한 다음 저장 을 클릭하여 호스트 리소스 할당을 완료합니다.
+
image::snapctr_add_windows_host_07.PNG[snapctr Windows 호스트 07을 추가합니다]

+
image::snapctr_add_windows_host_08.PNG[snapctr Windows 호스트 08을 추가합니다]





==== Unix 호스트를 추가하고 호스트에 플러그인을 설치합니다

. SnapCenter에 SnapCenterAdmin 권한으로 사용자 ID를 사용하여 로그인합니다.
. 왼쪽 메뉴에서 호스트 탭을 클릭하고 추가 를 클릭하여 호스트 추가 워크플로우를 엽니다.
. 호스트 유형으로 Linux를 선택합니다. 호스트 이름은 호스트 이름 또는 IP 주소일 수 있습니다. 그러나 SnapCenter 호스트에서 호스트 IP 주소를 수정하려면 호스트 이름을 확인해야 합니다. 2단계에서 만든 호스트 자격 증명을 선택합니다. 호스트 자격 증명에는 sudo 권한이 필요합니다. Oracle Database를 설치할 플러그인으로 선택하여 Oracle 및 Linux 호스트 플러그인을 모두 설치합니다.
+
image::snapctr_add_linux_host_01.PNG[snapctr 추가 Linux 호스트 01]

. 기타 옵션 을 클릭하고 "설치 전 검사 건너뛰기"를 선택합니다. 사전 설치 검사를 건너뛰는 것을 확인하는 메시지가 표시됩니다. 예 를 클릭한 다음 저장 을 클릭합니다.
+
image::snapctr_add_linux_host_02.PNG[snapctr Linux host 02 를 추가합니다]

. 제출 을 클릭하여 플러그인 설치를 시작합니다. 아래와 같이 지문을 확인하라는 메시지가 표시됩니다.
+
image::snapctr_add_linux_host_03.PNG[snapctr 추가 Linux 호스트 03]

. SnapCenter는 호스트 검증 및 등록을 수행한 다음 Linux 호스트에 플러그인을 설치합니다. 상태가 플러그인 설치 에서 실행 중 으로 변경됩니다.
+
image::snapctr_add_linux_host_04.PNG[snapctr 추가 Linux 호스트 04]

. 새로 추가된 호스트를 적절한 데이터베이스 관리 사용자 ID(여기서는 oradba)에 할당합니다.
+
image::snapctr_add_linux_host_05.PNG[snapctr Linux host 05 를 추가합니다]

+
image::snapctr_add_linux_host_06.PNG[snapctr 추가 Linux 호스트 06]





=== 4.데이터베이스 리소스 검색

플러그인 설치가 완료되면 호스트의 데이터베이스 리소스를 즉시 검색할 수 있습니다. 왼쪽 메뉴에서 리소스 탭을 클릭합니다. 데이터베이스 플랫폼 유형에 따라 데이터베이스, 리소스 그룹 등과 같은 다양한 보기를 사용할 수 있습니다. 호스트의 리소스가 검색되지 않고 표시되지 않으면 리소스 새로 고침 탭을 클릭해야 할 수도 있습니다.

image::snapctr_resources_ora.PNG[snapctr 리소스 ora]

데이터베이스가 처음 검색되면 전체 상태가 "보호되지 않음"으로 표시됩니다. 이전 스크린샷은 아직 백업 정책에 의해 보호되지 않은 Oracle 데이터베이스를 보여 줍니다.

백업 구성 또는 정책을 설정하고 백업을 실행한 경우 데이터베이스의 전체 상태는 백업 상태를 "Backup Succeeded"로 표시하고 마지막 백업의 타임스탬프를 표시합니다. 다음 스크린샷은 SQL Server 사용자 데이터베이스의 백업 상태를 보여 줍니다.

image::snapctr_resources_sql.PNG[snapctr 리소스 sql]

데이터베이스 액세스 자격 증명이 제대로 설정되어 있지 않으면 빨간색 잠금 단추가 데이터베이스에 액세스할 수 없음을 나타냅니다. 예를 들어, Windows 자격 증명에 데이터베이스 인스턴스에 대한 sysadmin 액세스 권한이 없는 경우 데이터베이스 자격 증명을 다시 구성하여 빨간색 잠금을 해제해야 합니다.

image::snapctr_add_windows_host_09.PNG[snapctr Windows 호스트 09를 추가합니다]

image::snapctr_add_windows_host_10.PNG[snapctr Windows 호스트 10을 추가합니다]

Windows 수준 또는 데이터베이스 수준에서 적절한 자격 증명이 구성되면 빨간색 잠금이 사라지고 SQL Server 유형 정보가 수집 및 검토됩니다.

image::snapctr_add_windows_host_11.PNG[snapctr Windows 호스트 11 추가]



=== 스토리지 클러스터 피어링 및 DB 볼륨 복제를 설정합니다

퍼블릭 클라우드를 타겟 대상으로 사용하여 사내 데이터베이스 데이터를 보호하기 위해 NetApp SnapMirror 기술을 사용하여 사내 ONTAP 클러스터 데이터베이스 볼륨을 클라우드의 CVO에 복제합니다. 그런 다음 복제된 타겟 볼륨을 개발/OPS 또는 재해 복구를 위해 복제할 수 있습니다. 다음은 클러스터 피어링을 설정하고 DB 볼륨 복제를 설정하는 상위 단계입니다.

. 온프레미스 클러스터와 CVO 클러스터 인스턴스 모두에서 클러스터 피어링을 위해 인터클러스터 LIF를 구성합니다. 이 단계는 ONTAP 시스템 관리자로 수행할 수 있습니다. 기본 CVO 배포에는 클러스터 간 LIF가 자동으로 구성됩니다.
+
사내 클러스터:

+
image::snapctr_cluster_replication_01.PNG[snapctr 클러스터 복제 01]

+
타겟 CVO 클러스터:

+
image::snapctr_cluster_replication_02.PNG[snapctr 클러스터 복제 02]

. 인터클러스터 LIF가 구성된 경우 NetApp Cloud Manager의 끌어서 놓기를 사용하여 클러스터 피어링을 설정하고 볼륨 복제를 설정할 수 있습니다. 을 참조하십시오 link:hybrid_dbops_snapcenter_getting_started_aws.html#aws-public-cloud["시작하기 - AWS 퍼블릭 클라우드"] 를 참조하십시오.
+
또는 ONTAP System Manager를 사용하여 다음과 같이 클러스터 피어링을 수행하고 DB 볼륨 복제를 수행할 수 있습니다.

. ONTAP 시스템 관리자에 로그인합니다. 클러스터 > 설정 으로 이동하고 피어 클러스터 를 클릭하여 클라우드의 CVO 인스턴스로 클러스터 피어링을 설정합니다.
+
image::snapctr_vol_snapmirror_00.PNG[snapctr vol SnapMirror 00 을 참조하십시오]

. 볼륨 탭으로 이동합니다. 복제할 데이터베이스 볼륨을 선택하고 보호 를 클릭합니다.
+
image::snapctr_vol_snapmirror_01.PNG[snapctr vol SnapMirror 01 을 참조하십시오]

. 보호 정책을 Asynchronous로 설정합니다. 대상 클러스터와 스토리지 SVM을 선택합니다.
+
image::snapctr_vol_snapmirror_02.PNG[snapctr vol SnapMirror 02]

. 볼륨이 소스와 타겟 간에 동기화되고 복제 관계가 정상 상태인지 확인합니다.
+
image::snapctr_vol_snapmirror_03.PNG[snapctr vol SnapMirror 03]





=== CVO 데이터베이스 스토리지 SVM을 SnapCenter에 추가합니다

. SnapCenter에 SnapCenterAdmin 권한으로 사용자 ID를 사용하여 로그인합니다.
. 메뉴에서 스토리지 시스템 탭을 클릭한 다음 새로 만들기를 클릭하여 복제된 타겟 데이터베이스 볼륨을 SnapCenter에 호스팅하는 CVO 스토리지 SVM을 추가합니다. 스토리지 시스템 필드에 클러스터 관리 IP를 입력하고 적절한 사용자 이름과 암호를 입력합니다.
+
image::snapctr_add_cvo_svm_01.PNG[snapctr cvo svm 01 을 추가합니다]

. 추가 옵션을 클릭하여 추가 스토리지 구성 옵션을 엽니다. 플랫폼 필드에서 Cloud Volumes ONTAP 를 선택하고 보조 를 선택한 다음 저장 을 클릭합니다.
+
image::snapctr_add_cvo_svm_02.PNG[snapctr cvo svm 02 를 추가합니다]

. 에 나와 있는 대로 스토리지 시스템을 SnapCenter 데이터베이스 관리 사용자 ID에 할당합니다 <<3.SnapCenter 호스트 플러그인 설치>>.
+
image::snapctr_add_cvo_svm_03.PNG[snapctr cvo svm 03 을 추가합니다]





=== SnapCenter에서 데이터베이스 백업 정책을 설정합니다

다음 절차에서는 전체 데이터베이스 또는 로그 파일 백업 정책을 만드는 방법을 보여 줍니다. 그런 다음 이 정책을 구현하여 데이터베이스 리소스를 보호할 수 있습니다. RPO(복구 지점 목표) 또는 RTO(복구 시간 목표)는 데이터베이스 및/또는 로그 백업의 빈도를 결정합니다.



==== Oracle에 대한 전체 데이터베이스 백업 정책을 생성합니다

. SnapCenter에 데이터베이스 관리 사용자 ID로 로그인하고 설정을 클릭한 다음 정책을 클릭합니다.
+
image::snapctr_ora_policy_data_01.PNG[snapctora 정책 데이터 01]

. New(새로 만들기) 를 클릭하여 새 백업 정책 생성 워크플로우를 시작하거나 수정할 기존 정책을 선택합니다.
+
image::snapctr_ora_policy_data_02.PNG[snapctora 정책 데이터 02]

. 백업 유형 및 스케줄 빈도를 선택합니다.
+
image::snapctr_ora_policy_data_03.PNG[snapctora 정책 데이터 03]

. 백업 보존 설정을 지정합니다. 이 경우 보관할 전체 데이터베이스 백업 복사본 수가 정의됩니다.
+
image::snapctr_ora_policy_data_04.PNG[snapctr ora 정책 데이터 04]

. 클라우드의 2차 위치에 복제할 로컬 기본 스냅샷 백업을 푸시할 2차 복제 옵션을 선택합니다.
+
image::snapctr_ora_policy_data_05.PNG[snapctr ora 정책 데이터 05]

. 백업 실행 전후에 실행할 선택적 스크립트를 지정합니다.
+
image::snapctr_ora_policy_data_06.PNG[snapctora 정책 데이터 06]

. 필요한 경우 백업 검증을 실행합니다.
+
image::snapctr_ora_policy_data_07.PNG[snapctora 정책 데이터 07]

. 요약.
+
image::snapctr_ora_policy_data_08.PNG[snapctora 정책 데이터 08]





==== Oracle에 대한 데이터베이스 로그 백업 정책을 생성합니다

. 데이터베이스 관리 사용자 ID를 사용하여 SnapCenter에 로그인하고 설정을 클릭한 다음 정책을 클릭합니다.
. 새로 만들기 를 클릭하여 새 백업 정책 생성 워크플로우를 시작하거나 수정할 기존 정책을 선택합니다.
+
image::snapctr_ora_policy_log_01.PNG[snapctr ora 정책 로그 01]

. 백업 유형 및 스케줄 빈도를 선택합니다.
+
image::snapctr_ora_policy_log_02.PNG[snapctr ora 정책 로그 02]

. 로그 보존 기간을 설정합니다.
+
image::snapctr_ora_policy_log_03.PNG[snapctr ora 정책 로그 03]

. 퍼블릭 클라우드의 2차 위치에 복제
+
image::snapctr_ora_policy_log_04.PNG[snapctr ora 정책 로그 04]

. 로그 백업 전후에 실행할 선택적 스크립트를 지정합니다.
+
image::snapctr_ora_policy_log_05.PNG[snapctr ora 정책 로그 05]

. 백업 검증 스크립트를 지정합니다.
+
image::snapctr_ora_policy_log_06.PNG[snapctr ora 정책 로그 06]

. 요약.
+
image::snapctr_ora_policy_log_07.PNG[snapctr ora 정책 로그 07]





==== SQL에 대한 전체 데이터베이스 백업 정책을 생성합니다

. 데이터베이스 관리 사용자 ID를 사용하여 SnapCenter에 로그인하고 설정을 클릭한 다음 정책을 클릭합니다.
+
image::snapctr_sql_policy_data_01.PNG[snapctr SQL 정책 데이터 01]

. 새로 만들기 를 클릭하여 새 백업 정책 생성 워크플로우를 시작하거나 수정할 기존 정책을 선택합니다.
+
image::snapctr_sql_policy_data_02.PNG[snapctr SQL 정책 데이터 02]

. 백업 옵션 및 예약 빈도를 정의합니다. 가용성 그룹으로 구성된 SQL Server의 경우 기본 백업 복제본을 설정할 수 있습니다.
+
image::snapctr_sql_policy_data_03.PNG[snapctr SQL 정책 데이터 03]

. 백업 보존 기간을 설정합니다.
+
image::snapctr_sql_policy_data_04.PNG[snapctr SQL 정책 데이터 04]

. 클라우드의 2차 위치에 백업 복사본을 복제할 수 있습니다.
+
image::snapctr_sql_policy_data_05.PNG[snapctr SQL 정책 데이터 05]

. 백업 작업 전후에 실행할 선택적 스크립트를 지정합니다.
+
image::snapctr_sql_policy_data_06.PNG[snapctr SQL 정책 데이터 06]

. 백업 확인을 실행할 옵션을 지정합니다.
+
image::snapctr_sql_policy_data_07.PNG[snapctr SQL 정책 데이터 07]

. 요약.
+
image::snapctr_sql_policy_data_08.PNG[snapctr SQL 정책 데이터 08]





==== SQL에 대한 데이터베이스 로그 백업 정책을 생성합니다.

. 데이터베이스 관리 사용자 ID를 사용하여 SnapCenter에 로그인하고 설정 > 정책 을 클릭한 다음 새로 만들기 를 클릭하여 새 정책 생성 워크플로를 시작합니다.
+
image::snapctr_sql_policy_log_01.PNG[snapctr SQL 정책 로그 01]

. 로그 백업 옵션 및 스케줄 빈도를 정의합니다. 가용성 그룹으로 구성된 SQL Server의 경우 기본 백업 복제본을 설정할 수 있습니다.
+
image::snapctr_sql_policy_log_02.PNG[snapctr SQL 정책 로그 02]

. SQL Server 데이터 백업 정책은 로그 백업 보존을 정의합니다. 여기서 기본값을 사용합니다.
+
image::snapctr_sql_policy_log_03.PNG[snapctr SQL 정책 로그 03]

. 클라우드의 2차 사이트에 로그 백업 복제를 설정합니다.
+
image::snapctr_sql_policy_log_04.PNG[snapctr SQL 정책 로그 04]

. 백업 작업 전후에 실행할 선택적 스크립트를 지정합니다.
+
image::snapctr_sql_policy_log_05.PNG[snapctr SQL 정책 로그 05]

. 요약.
+
image::snapctr_sql_policy_log_06.PNG[snapctr SQL 정책 로그 06]





=== 데이터베이스를 보호하기 위해 백업 정책을 구현합니다

SnapCenter는 리소스 그룹을 사용하여 서버에서 호스팅되는 여러 데이터베이스, 동일한 스토리지 볼륨을 공유하는 데이터베이스, 비즈니스 애플리케이션을 지원하는 여러 데이터베이스 등 데이터베이스 리소스의 논리적 그룹으로 데이터베이스를 백업합니다. 단일 데이터베이스를 보호하면 고유한 리소스 그룹이 만들어집니다. 다음 절차에서는 Oracle 및 SQL Server 데이터베이스를 보호하기 위해 섹션 7에서 만든 백업 정책을 구현하는 방법을 보여 줍니다.



==== Oracle의 전체 백업을 위한 리소스 그룹을 생성합니다

. 데이터베이스 관리 사용자 ID를 사용하여 SnapCenter에 로그인하고 리소스 탭으로 이동합니다. 보기 드롭다운 목록에서 데이터베이스 또는 리소스 그룹을 선택하여 리소스 그룹 만들기 워크플로를 시작합니다.
+
image::snapctr_ora_rgroup_full_01.PNG[snapctr ora rgroup full 01]

. 리소스 그룹의 이름과 태그를 입력합니다. 스냅샷 복사본의 명명 형식을 정의하고 구성된 경우 중복 아카이브 로그 대상을 건너뛸 수 있습니다.
+
image::snapctr_ora_rgroup_full_02.PNG[snapctr ora rgroup full 02]

. 리소스 그룹에 데이터베이스 리소스를 추가합니다.
+
image::snapctr_ora_rgroup_full_03.PNG[snapctr ora rgroup full 03]

. 드롭다운 목록에서 섹션 7에 생성된 전체 백업 정책을 선택합니다.
+
image::snapctr_ora_rgroup_full_04.PNG[snapctr ora rgroup full 04]

. (+) 기호를 클릭하여 원하는 백업 일정을 구성합니다.
+
image::snapctr_ora_rgroup_full_05.PNG[snapctr ora rgroup full 05]

. Load Locators(로케이터 로드) 를 클릭하여 소스 및 대상 볼륨을 로드합니다.
+
image::snapctr_ora_rgroup_full_06.PNG[snapctr ora rgroup full 06]

. 필요한 경우 이메일 알림에 사용할 SMTP 서버를 구성합니다.
+
image::snapctr_ora_rgroup_full_07.PNG[snapctr ora rgroup full 07]

. 요약.
+
image::snapctr_ora_rgroup_full_08.PNG[snapctr ora rgroup full 08]





==== Oracle의 로그 백업을 위한 리소스 그룹을 생성합니다

. 데이터베이스 관리 사용자 ID를 사용하여 SnapCenter에 로그인하고 리소스 탭으로 이동합니다. 보기 드롭다운 목록에서 데이터베이스 또는 리소스 그룹을 선택하여 리소스 그룹 만들기 워크플로를 시작합니다.
+
image::snapctr_ora_rgroup_log_01.PNG[snapctr ora rgroup 로그 01]

. 리소스 그룹의 이름과 태그를 입력합니다. 스냅샷 복사본의 명명 형식을 정의하고 구성된 경우 중복 아카이브 로그 대상을 건너뛸 수 있습니다.
+
image::snapctr_ora_rgroup_log_02.PNG[snapctr ora rgroup 로그 02]

. 리소스 그룹에 데이터베이스 리소스를 추가합니다.
+
image::snapctr_ora_rgroup_log_03.PNG[snapctr ora rgroup 로그 03]

. 드롭다운 목록에서 섹션 7에 생성된 로그 백업 정책을 선택합니다.
+
image::snapctr_ora_rgroup_log_04.PNG[snapctr ora rgroup 로그 04]

. (+) 기호를 클릭하여 원하는 백업 일정을 구성합니다.
+
image::snapctr_ora_rgroup_log_05.PNG[snapctr ora rgroup log 05]

. 백업 검증이 구성된 경우 여기에 표시됩니다.
+
image::snapctr_ora_rgroup_log_06.PNG[snapctr ora rgroup 로그 06]

. 필요한 경우 e-메일 알림을 위한 SMTP 서버를 구성합니다.
+
image::snapctr_ora_rgroup_log_07.PNG[snapctr ora rgroup 로그 07]

. 요약.
+
image::snapctr_ora_rgroup_log_08.PNG[snapctr ora rgroup 로그 08]





==== SQL Server의 전체 백업을 위한 리소스 그룹을 생성합니다

. 데이터베이스 관리 사용자 ID를 사용하여 SnapCenter에 로그인하고 리소스 탭으로 이동합니다. 보기 드롭다운 목록에서 데이터베이스 또는 리소스 그룹을 선택하여 리소스 그룹 만들기 워크플로를 시작합니다. 리소스 그룹의 이름과 태그를 입력합니다. 스냅샷 복사본의 명명 형식을 정의할 수 있습니다.
+
image::snapctr_sql_rgroup_full_01.PNG[snapctr sql rgroup full 01]

. 백업할 데이터베이스 리소스를 선택합니다.
+
image::snapctr_sql_rgroup_full_02.PNG[snapctr sql rgroup full 02]

. 섹션 7에서 생성한 전체 SQL 백업 정책을 선택합니다.
+
image::snapctr_sql_rgroup_full_03.PNG[snapctr sql rgroup full 03]

. 백업 빈도와 정확한 백업 시간을 추가합니다.
+
image::snapctr_sql_rgroup_full_04.PNG[snapctr sql rgroup full 04]

. 백업 확인을 수행할 경우 보조 백업에 대한 검증 서버를 선택합니다. Load Locator를 클릭하여 보조 스토리지 위치를 채웁니다.
+
image::snapctr_sql_rgroup_full_05.PNG[snapctr SQL rgroup full 05]

. 필요한 경우 이메일 알림에 사용할 SMTP 서버를 구성합니다.
+
image::snapctr_sql_rgroup_full_06.PNG[snapctr sql rgroup full 06]

. 요약.
+
image::snapctr_sql_rgroup_full_07.PNG[snapctr sql rgroup full 07]





==== SQL Server의 로그 백업을 위한 리소스 그룹을 생성합니다

. 데이터베이스 관리 사용자 ID를 사용하여 SnapCenter에 로그인하고 리소스 탭으로 이동합니다. 보기 드롭다운 목록에서 데이터베이스 또는 리소스 그룹을 선택하여 리소스 그룹 만들기 워크플로를 시작합니다. 리소스 그룹의 이름과 태그를 입력합니다. 스냅샷 복사본의 명명 형식을 정의할 수 있습니다.
+
image::snapctr_sql_rgroup_log_01.PNG[snapctr SQL rgroup 로그 01]

. 백업할 데이터베이스 리소스를 선택합니다.
+
image::snapctr_sql_rgroup_log_02.PNG[snapctr SQL rgroup 로그 02]

. 섹션 7에서 생성한 SQL 로그 백업 정책을 선택합니다.
+
image::snapctr_sql_rgroup_log_03.PNG[snapctr SQL rgroup 로그 03]

. 백업 빈도와 정확한 백업 시간을 추가합니다.
+
image::snapctr_sql_rgroup_log_04.PNG[snapctr SQL rgroup 로그 04]

. 백업 확인을 수행할 경우 보조 백업에 대한 검증 서버를 선택합니다. Load Locator를 클릭하여 보조 스토리지 위치를 채웁니다.
+
image::snapctr_sql_rgroup_log_05.PNG[snapctr SQL rgroup 로그 05]

. 필요한 경우 이메일 알림에 사용할 SMTP 서버를 구성합니다.
+
image::snapctr_sql_rgroup_log_06.PNG[snapctr SQL rgroup 로그 06]

. 요약.
+
image::snapctr_sql_rgroup_log_07.PNG[snapctr SQL rgroup 로그 07]





=== 9.백업 검증

데이터베이스 리소스 보호를 위해 데이터베이스 백업 리소스 그룹을 생성한 후에는 미리 정의된 일정에 따라 백업 작업이 실행됩니다. Monitor 탭에서 작업 실행 상태를 확인합니다.

image::snapctr_job_status_sql.PNG[snapctr 작업 상태 sql]

리소스 탭으로 이동하고 데이터베이스 이름을 클릭하여 데이터베이스 백업에 대한 세부 정보를 확인하고, 로컬 복사본과 미러 복사본 간에 전환하여 스냅샷 백업이 퍼블릭 클라우드의 2차 위치에 복제되었는지 확인합니다.

image::snapctr_job_status_ora.PNG[snapctr 작업 상태 ora]

이때 운영 장애가 발생할 경우 클라우드의 데이터베이스 백업 복사본을 클론 복제하여 개발/테스트 프로세스를 실행하거나 재해 복구를 수행할 수 있습니다.
